/*! For license information please see 5141.a0c65779.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[5141],{"./node_modules/invert-color/lib/invert.min.js":function(module){module.exports=function(){"use strict";var t=Math.sqrt(1.05*.05)-.05,n=/^(?:[0-9a-f]{3}){1,2}$/i,i={black:"#000000",white:"#ffffff",threshold:t};function o(r){if("#"===r.slice(0,1)&&(r=r.slice(1)),!n.test(r))throw new Error('Invalid HEX color: "'+r+'"');return 3===r.length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function f(r){if(!r)throw new Error("Invalid color value");return Array.isArray(r)?r:"string"==typeof r?o(r):[r.r,r.g,r.b]}function u(r,n,t){var e=!0===n?i:Object.assign({},i,n);return function(r){var n,t,e=[];for(n=0;n<r.length;n++)t=r[n]/255,e[n]=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4);return.2126*e[0]+.7152*e[1]+.0722*e[2]}(r)>e.threshold?t?o(e.black):e.black:t?o(e.white):e.white}function r(r,n){return void 0===n&&(n=!1),r=f(r),n?u(r,n):"#"+r.map((function(r){return n=(255-r).toString(16),void 0===t&&(t=2),(new Array(t).join("0")+n).slice(-t);var n,t})).join("")}return function(r){function n(r,n){var t;return r=f(r),{r:(t=n?u(r,n,!0):r.map((function(r){return 255-r})))[0],g:t[1],b:t[2]}}r.asRGB=n,r.asRgbArray=function(r,n){return r=f(r),n?u(r,n,!0):r.map((function(r){return 255-r}))},r.defaultThreshold=t,r.asRgbObject=n}(r||(r={})),r}()},"./node_modules/lib0/broadcastchannel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B1:()=>subscribe,al:()=>unsubscribe,mk:()=>publish});var _map_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lib0/map.js"),_set_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lib0/set.js"),_buffer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lib0/buffer.js"),_storage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lib0/storage.js");const channels=new Map;const BC="undefined"==typeof BroadcastChannel?class LocalStoragePolyfill{constructor(room){this.room=room,this.onmessage=null,this._onChange=e=>e.key===room&&null!==this.onmessage&&this.onmessage({data:_buffer_js__WEBPACK_IMPORTED_MODULE_0__.Ey(e.newValue||"")}),_storage_js__WEBPACK_IMPORTED_MODULE_1__.k9(this._onChange)}postMessage(buf){_storage_js__WEBPACK_IMPORTED_MODULE_1__.JT.setItem(this.room,_buffer_js__WEBPACK_IMPORTED_MODULE_0__.nk(_buffer_js__WEBPACK_IMPORTED_MODULE_0__.zS(buf)))}close(){_storage_js__WEBPACK_IMPORTED_MODULE_1__.o6(this._onChange)}}:BroadcastChannel,getChannel=room=>_map_js__WEBPACK_IMPORTED_MODULE_2__._4(channels,room,(()=>{const subs=_set_js__WEBPACK_IMPORTED_MODULE_3__.vt(),bc=new BC(room);return bc.onmessage=e=>subs.forEach((sub=>sub(e.data,"broadcastchannel"))),{bc,subs}})),subscribe=(room,f)=>(getChannel(room).subs.add(f),f),unsubscribe=(room,f)=>{const channel=getChannel(room),unsubscribed=channel.subs.delete(f);return unsubscribed&&0===channel.subs.size&&(channel.bc.close(),channels.delete(room)),unsubscribed},publish=(room,data,origin=null)=>{const c=getChannel(room);c.bc.postMessage(data),c.subs.forEach((sub=>sub(data,origin)))}},"./node_modules/lib0/url.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>encodeQueryParams});var _object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lib0/object.js");const encodeQueryParams=params=>_object_js__WEBPACK_IMPORTED_MODULE_0__.Tj(params,((val,key)=>`${encodeURIComponent(key)}=${encodeURIComponent(val)}`)).join("&")},"./node_modules/y-protocols/auth.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{gU:()=>readAuthMessage});var lib0_decoding__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lib0/decoding.js");const readAuthMessage=(decoder,y,permissionDeniedHandler)=>{if(0===lib0_decoding__WEBPACK_IMPORTED_MODULE_0__.cw(decoder))permissionDeniedHandler(y,lib0_decoding__WEBPACK_IMPORTED_MODULE_0__.t3(decoder))}},"./node_modules/y-protocols/awareness.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X3:()=>encodeAwarenessUpdate,_g:()=>removeAwarenessStates,tQ:()=>applyAwarenessUpdate,ww:()=>Awareness});var lib0_encoding__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lib0/encoding.js"),lib0_decoding__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lib0/decoding.js"),lib0_time__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lib0/time.js"),lib0_math__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lib0/math.js"),lib0_observable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lib0/observable.js"),lib0_function__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lib0/function.js");class Awareness extends lib0_observable__WEBPACK_IMPORTED_MODULE_0__.c{constructor(doc){super(),this.doc=doc,this.clientID=doc.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const now=lib0_time__WEBPACK_IMPORTED_MODULE_1__._g();null!==this.getLocalState()&&15e3<=now-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const remove=[];this.meta.forEach(((meta,clientid)=>{clientid!==this.clientID&&3e4<=now-meta.lastUpdated&&this.states.has(clientid)&&remove.push(clientid)})),remove.length>0&&removeAwarenessStates(this,remove,"timeout")}),lib0_math__WEBPACK_IMPORTED_MODULE_2__.RI(3e3)),doc.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(state){const clientID=this.clientID,currLocalMeta=this.meta.get(clientID),clock=void 0===currLocalMeta?0:currLocalMeta.clock+1,prevState=this.states.get(clientID);null===state?this.states.delete(clientID):this.states.set(clientID,state),this.meta.set(clientID,{clock,lastUpdated:lib0_time__WEBPACK_IMPORTED_MODULE_1__._g()});const added=[],updated=[],filteredUpdated=[],removed=[];null===state?removed.push(clientID):null==prevState?null!=state&&added.push(clientID):(updated.push(clientID),lib0_function__WEBPACK_IMPORTED_MODULE_3__.vo(prevState,state)||filteredUpdated.push(clientID)),(added.length>0||filteredUpdated.length>0||removed.length>0)&&this.emit("change",[{added,updated:filteredUpdated,removed},"local"]),this.emit("update",[{added,updated,removed},"local"])}setLocalStateField(field,value){const state=this.getLocalState();null!==state&&this.setLocalState({...state,[field]:value})}getStates(){return this.states}}const removeAwarenessStates=(awareness,clients,origin)=>{const removed=[];for(let i=0;i<clients.length;i++){const clientID=clients[i];if(awareness.states.has(clientID)){if(awareness.states.delete(clientID),clientID===awareness.clientID){const curMeta=awareness.meta.get(clientID);awareness.meta.set(clientID,{clock:curMeta.clock+1,lastUpdated:lib0_time__WEBPACK_IMPORTED_MODULE_1__._g()})}removed.push(clientID)}}removed.length>0&&(awareness.emit("change",[{added:[],updated:[],removed},origin]),awareness.emit("update",[{added:[],updated:[],removed},origin]))},encodeAwarenessUpdate=(awareness,clients,states=awareness.states)=>{const len=clients.length,encoder=lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.xv();lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.zd(encoder,len);for(let i=0;i<len;i++){const clientID=clients[i],state=states.get(clientID)||null,clock=awareness.meta.get(clientID).clock;lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.zd(encoder,clientID),lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.zd(encoder,clock),lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.Qj(encoder,JSON.stringify(state))}return lib0_encoding__WEBPACK_IMPORTED_MODULE_4__.Fo(encoder)},applyAwarenessUpdate=(awareness,update,origin)=>{const decoder=lib0_decoding__WEBPACK_IMPORTED_MODULE_5__.$C(update),timestamp=lib0_time__WEBPACK_IMPORTED_MODULE_1__._g(),added=[],updated=[],filteredUpdated=[],removed=[],len=lib0_decoding__WEBPACK_IMPORTED_MODULE_5__.cw(decoder);for(let i=0;i<len;i++){const clientID=lib0_decoding__WEBPACK_IMPORTED_MODULE_5__.cw(decoder);let clock=lib0_decoding__WEBPACK_IMPORTED_MODULE_5__.cw(decoder);const state=JSON.parse(lib0_decoding__WEBPACK_IMPORTED_MODULE_5__.t3(decoder)),clientMeta=awareness.meta.get(clientID),prevState=awareness.states.get(clientID),currClock=void 0===clientMeta?0:clientMeta.clock;(currClock<clock||currClock===clock&&null===state&&awareness.states.has(clientID))&&(null===state?clientID===awareness.clientID&&null!=awareness.getLocalState()?clock++:awareness.states.delete(clientID):awareness.states.set(clientID,state),awareness.meta.set(clientID,{clock,lastUpdated:timestamp}),void 0===clientMeta&&null!==state?added.push(clientID):void 0!==clientMeta&&null===state?removed.push(clientID):null!==state&&(lib0_function__WEBPACK_IMPORTED_MODULE_3__.vo(state,prevState)||filteredUpdated.push(clientID),updated.push(clientID)))}(added.length>0||filteredUpdated.length>0||removed.length>0)&&awareness.emit("change",[{added,updated:filteredUpdated,removed},origin]),(added.length>0||updated.length>0||removed.length>0)&&awareness.emit("update",[{added,updated,removed},origin])}},"./node_modules/y-protocols/sync.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{VU:()=>readSyncMessage,Zg:()=>messageYjsSyncStep2,f7:()=>writeUpdate,nh:()=>writeSyncStep2,ue:()=>writeSyncStep1});var lib0_encoding__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lib0/encoding.js"),lib0_decoding__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lib0/decoding.js"),yjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/yjs/dist/yjs.mjs"),console=__webpack_require__("./node_modules/console-browserify/index.js");const messageYjsSyncStep2=1,writeSyncStep1=(encoder,doc)=>{lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.zd(encoder,0);const sv=yjs__WEBPACK_IMPORTED_MODULE_1__.FX(doc);lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.Gu(encoder,sv)},writeSyncStep2=(encoder,doc,encodedStateVector)=>{lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.zd(encoder,messageYjsSyncStep2),lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.Gu(encoder,yjs__WEBPACK_IMPORTED_MODULE_1__.PR(doc,encodedStateVector))},readSyncStep2=(decoder,doc,transactionOrigin)=>{try{yjs__WEBPACK_IMPORTED_MODULE_1__.QE(doc,lib0_decoding__WEBPACK_IMPORTED_MODULE_2__.bo(decoder),transactionOrigin)}catch(error){console.error("Caught error while handling a Yjs update",error)}},writeUpdate=(encoder,update)=>{lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.zd(encoder,2),lib0_encoding__WEBPACK_IMPORTED_MODULE_0__.Gu(encoder,update)},readUpdate=readSyncStep2,readSyncMessage=(decoder,encoder,doc,transactionOrigin)=>{const messageType=lib0_decoding__WEBPACK_IMPORTED_MODULE_2__.cw(decoder);switch(messageType){case 0:((decoder,encoder,doc)=>{writeSyncStep2(encoder,doc,lib0_decoding__WEBPACK_IMPORTED_MODULE_2__.bo(decoder))})(decoder,encoder,doc);break;case messageYjsSyncStep2:readSyncStep2(decoder,doc,transactionOrigin);break;case 2:readUpdate(decoder,doc,transactionOrigin);break;default:throw new Error("Unknown message type")}return messageType}}}]);