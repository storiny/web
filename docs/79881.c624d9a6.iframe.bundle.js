"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[79881],{"./packages/editor/src/plugins/max-length/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>max_length});var LexicalComposerContext_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),LexicalSelection_prod=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.prod.mjs"),LexicalUtils_prod=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.prod.mjs"),story=__webpack_require__("./packages/shared/src/constants/story/index.ts"),Lexical_prod=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const max_length=()=>{const[editor]=(0,LexicalComposerContext_prod.DF)();return react.useEffect((()=>{let last_restored_editor_state=null;return editor.registerNodeTransform(Lexical_prod.h,(root_node=>{const selection=(0,Lexical_prod.vJ)();if(!(0,Lexical_prod.I2)(selection)||!selection.isCollapsed())return;const prev_editor_state=editor.getEditorState(),prev_text_content_size=prev_editor_state.read((()=>root_node.getTextContentSize())),text_content_size=root_node.getTextContentSize();if(prev_text_content_size!==text_content_size){const del_count=text_content_size-story.ag,anchor=selection.anchor;del_count>0&&(prev_text_content_size===story.ag&&last_restored_editor_state!==prev_editor_state?(last_restored_editor_state=prev_editor_state,(0,LexicalUtils_prod.Xq)(editor,prev_editor_state)):(0,LexicalSelection_prod.eT)(editor,anchor,del_count))}}))}),[editor]),null}},"./packages/shared/src/constants/story/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R8:()=>MAX_STORY_TAGS,ag:()=>STORY_MAX_LENGTH,Dw:()=>STORY_PROPS,iy:()=>STORY_SCHEMA});var lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),def=__webpack_require__("./packages/proto/dist/story_def/v1/def.ts"),story_category=__webpack_require__("./packages/shared/src/enums/story-category/index.ts"),messages=__webpack_require__("./packages/shared/src/constants/messages/index.ts");const TAG_PROPS_name={max_length:32,min_length:1},TAG_NAME_REGEX=new RegExp(`^[a-z0-9-]{${TAG_PROPS_name.min_length},${TAG_PROPS_name.max_length}}$`),TAG_SCHEMA={name:lib.z.string().min(TAG_PROPS_name.min_length,messages.r.min("tag name",TAG_PROPS_name.min_length)).max(TAG_PROPS_name.max_length,messages.r.max("tag name",TAG_PROPS_name.max_length)).regex(TAG_NAME_REGEX,"Tag name is invalid")},MAX_STORY_TAGS=5,STORY_MAX_LENGTH=6e4,STORY_PROPS={title:{max_length:96,min_length:1},description:{max_length:256},seo_title:{max_length:54},seo_description:{max_length:160},canonical_url:{max_length:1024}},STORY_SCHEMA={title:lib.z.string().min(STORY_PROPS.title.min_length,messages.r.min("title",STORY_PROPS.title.min_length)).max(STORY_PROPS.title.max_length,messages.r.max("title",STORY_PROPS.title.max_length)),description:lib.z.string().max(STORY_PROPS.description.max_length,messages.r.max("description",STORY_PROPS.description.max_length)).nullable(),splash_id:lib.z.string().nullable(),splash_hex:lib.z.string().nullable(),preview_image:lib.z.string().nullable(),tags:lib.z.array(TAG_SCHEMA.name).max(MAX_STORY_TAGS,messages.r.max("tags",MAX_STORY_TAGS)),seo_title:lib.z.string().max(STORY_PROPS.seo_title.max_length,messages.r.max("seo title",STORY_PROPS.seo_title.max_length)).nullable(),seo_description:lib.z.string().max(STORY_PROPS.seo_description.max_length,messages.r.max("seo description",STORY_PROPS.seo_description.max_length)).nullable(),canonical_url:lib.z.string().url().max(STORY_PROPS.canonical_url.max_length,messages.r.max("canonical url",STORY_PROPS.canonical_url.max_length)).nullable(),license:lib.z.nativeEnum(def.hi),visibility:lib.z.nativeEnum(def.UO),age_restriction:lib.z.nativeEnum(def.v$),category:lib.z.nativeEnum(story_category._),disable_toc:lib.z.boolean(),disable_comments:lib.z.boolean(),disable_public_revision_history:lib.z.boolean()}}}]);