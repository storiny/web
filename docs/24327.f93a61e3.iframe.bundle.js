"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[24327],{"./packages/editor/src/components/auxiliary-content/suggestion-list/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>suggestion_list});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/jotai/esm/react.mjs"),dynamic=__webpack_require__("./node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),compiled_react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),context_blog=__webpack_require__("./apps/web/src/common/context/blog.tsx"),common_dynamic=__webpack_require__("./apps/web/src/common/dynamic/index.tsx"),common_story=__webpack_require__("./apps/web/src/common/story/index.ts"),error_state=__webpack_require__("./packages/ui/src/entities/error-state/error-state.tsx"),use_default_fetch=__webpack_require__("./packages/ui/src/hooks/use-default-fetch/index.ts"),use_pagination=__webpack_require__("./packages/ui/src/hooks/use-pagination/index.ts"),recommendations=__webpack_require__("./packages/ui/src/redux/features/api/endpoints/public/blogs/stories/recommendations/index.ts"),get_query_error_type=__webpack_require__("./packages/ui/src/redux/features/api/utils/get-query-error-type/index.ts"),stories_recommendations=__webpack_require__("./packages/ui/src/redux/features/api/endpoints/public/stories/recommendations/index.ts"),story_metadata=__webpack_require__("./packages/editor/src/atoms/story-metadata/index.ts");const EmptyState=dynamic_default()((()=>__webpack_require__.e(45347).then(__webpack_require__.bind(__webpack_require__,"./packages/editor/src/components/auxiliary-content/suggestion-list/empty-state.tsx"))),{loadableGenerated:{webpack:()=>["./packages/editor/src/components/auxiliary-content/suggestion-list/empty-state.tsx"]},loading:(0,common_dynamic.S)()}),BlogEditorAuxiliaryContentSuggestionList=()=>{const story=(0,react.md)(story_metadata._),blog=(0,context_blog.jl)(),page=(0,use_pagination.h)((0,recommendations.D)({page:1,story_id:story.id,blog_id:blog.id})),[trigger,{data:{items=[],has_more}={},isLoading:is_loading,isFetching:is_fetching,isError:is_error,error}]=(0,recommendations.c)(),refetch=(0,use_default_fetch.J)(trigger,{page,story_id:story.id,blog_id:blog.id},[story.id,blog.id]),load_more=compiled_react.useCallback((()=>{trigger({page:page+1,story_id:story.id,blog_id:blog.id},!0)}),[blog.id,page,story.id,trigger]);return(0,jsx_runtime.jsx)(compiled_react.Fragment,{children:is_error?(0,jsx_runtime.jsx)(error_state.A,{auto_size:!0,component_props:{button:{loading:is_fetching}},retry:refetch,type:(0,get_query_error_type.w)(error)}):is_fetching||items.length?is_loading||is_fetching&&1===page?(0,jsx_runtime.jsx)(common_story.jD,{}):(0,jsx_runtime.jsx)(common_story.rK,{has_more:Boolean(has_more),load_more,stories:items}):(0,jsx_runtime.jsx)(EmptyState,{})})},DefaultEditorAuxiliaryContentSuggestionList=()=>{const story=(0,react.md)(story_metadata._),page=(0,use_pagination.h)((0,stories_recommendations.e)({page:1,story_id:story.id})),[trigger,{data:{items=[],has_more}={},isLoading:is_loading,isFetching:is_fetching,isError:is_error,error}]=(0,stories_recommendations.X)(),refetch=(0,use_default_fetch.J)(trigger,{page,story_id:story.id},[story.id]),load_more=compiled_react.useCallback((()=>{trigger({page:page+1,story_id:story.id},!0)}),[page,story.id,trigger]);return(0,jsx_runtime.jsx)(compiled_react.Fragment,{children:is_error?(0,jsx_runtime.jsx)(error_state.A,{auto_size:!0,component_props:{button:{loading:is_fetching}},retry:refetch,type:(0,get_query_error_type.w)(error)}):is_fetching||items.length?is_loading||is_fetching&&1===page?(0,jsx_runtime.jsx)(common_story.jD,{}):(0,jsx_runtime.jsx)(common_story.rK,{has_more:Boolean(has_more),load_more,stories:items}):(0,jsx_runtime.jsx)(EmptyState,{})})},EditorAuxiliaryContentSuggestionList=()=>{const blog=(0,context_blog.jl)();return(null==blog?void 0:blog.id)?(0,jsx_runtime.jsx)(BlogEditorAuxiliaryContentSuggestionList,{}):(0,jsx_runtime.jsx)(DefaultEditorAuxiliaryContentSuggestionList,{})},suggestion_list=EditorAuxiliaryContentSuggestionList;EditorAuxiliaryContentSuggestionList.__docgenInfo={description:"",methods:[],displayName:"EditorAuxiliaryContentSuggestionList"}},"./packages/ui/src/redux/features/api/endpoints/public/blogs/stories/recommendations/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>select_blog_story_recommendations,c:()=>use_get_blog_story_recommendations_query});var _redux_features__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/redux/features/api/utils/merge-fn/index.ts"),_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/redux/features/api/slice.ts");const{useLazyGetBlogStoryRecommendationsQuery:use_get_blog_story_recommendations_query,endpoints:{getBlogStoryRecommendations:{select:select_blog_story_recommendations}}}=_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__.Qo.injectEndpoints({endpoints:builder=>({getBlogStoryRecommendations:builder.query({query:({story_id,blog_id,page})=>`/${((blog_id,story_id)=>`public/blogs/${blog_id}/stories/${story_id}/recommendations`)(blog_id,story_id)}?page=${page}`,serializeQueryArgs:({endpointName,queryArgs})=>`${endpointName}:${queryArgs.blog_id}:${queryArgs.story_id}`,transformResponse:(response,_,{page})=>({page,items:response,has_more:10===response.length}),merge:(cache,data)=>(0,_redux_features__WEBPACK_IMPORTED_MODULE_1__.U)(cache,data),providesTags:result=>result?[...result.items.map((({id})=>({type:"Story",id}))),"Story"]:["Story"],forceRefetch:({currentArg,previousArg})=>(null==currentArg?void 0:currentArg.story_id)!==(null==previousArg?void 0:previousArg.story_id)||(null==currentArg?void 0:currentArg.blog_id)!==(null==previousArg?void 0:previousArg.blog_id)||(null==currentArg?void 0:currentArg.page)!==(null==previousArg?void 0:previousArg.page)})})})},"./packages/ui/src/redux/features/api/endpoints/public/stories/recommendations/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>use_get_story_recommendations_query,e:()=>select_story_recommendations});var _redux_features__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/redux/features/api/utils/merge-fn/index.ts"),_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/redux/features/api/slice.ts");const{useLazyGetStoryRecommendationsQuery:use_get_story_recommendations_query,endpoints:{getStoryRecommendations:{select:select_story_recommendations}}}=_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__.Qo.injectEndpoints({endpoints:builder=>({getStoryRecommendations:builder.query({query:({story_id,page})=>`/${(story_id=>`public/stories/${story_id}/recommendations`)(story_id)}?page=${page}`,serializeQueryArgs:({endpointName,queryArgs})=>`${endpointName}:${queryArgs.story_id}`,transformResponse:(response,_,{page})=>({page,items:response,has_more:10===response.length}),merge:(cache,data)=>(0,_redux_features__WEBPACK_IMPORTED_MODULE_1__.U)(cache,data),providesTags:result=>result?[...result.items.map((({id})=>({type:"Story",id}))),"Story"]:["Story"],forceRefetch:({currentArg,previousArg})=>(null==currentArg?void 0:currentArg.story_id)!==(null==previousArg?void 0:previousArg.story_id)||(null==currentArg?void 0:currentArg.page)!==(null==previousArg?void 0:previousArg.page)})})})}}]);