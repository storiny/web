"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[25739],{"./packages/shared/src/enums/content-type/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>ContentType});var ContentType=function(ContentType){return ContentType.JSON="application/json; charset=UTF-8",ContentType}({})},"./packages/ui/src/entities/notification/actions/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>actions});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),notification_type=__webpack_require__("./packages/shared/src/enums/notification-type/index.ts"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),icon_button=__webpack_require__("./packages/ui/src/components/icon-button/icon-button.tsx"),use_media_query=__webpack_require__("./packages/ui/src/hooks/use-media-query/index.ts"),create_svg_icon=__webpack_require__("./packages/ui/src/utils/create-svg-icon/create-svg-icon.tsx");const BellOffIcon=(0,jsx_runtime.jsx)("path",{d:"M4.67 2.68c.1-.07.22-.13.33-.18a1 1 0 0 1 2 0 3.5 3.5 0 0 1 2 3V7m-.5 1.5H2A2 2 0 0 0 3 7V5.5c.03-.67.25-1.3.64-1.85M4.5 8.5V9a1.5 1.5 0 0 0 3 0v-.5m-6-7 9 9"}),bell_off=(0,create_svg_icon.S)(BellOffIcon,"bell-off");var check=__webpack_require__("./packages/ui/src/icons/check/index.tsx"),content_type=__webpack_require__("./packages/shared/src/enums/content-type/index.ts"),slice=__webpack_require__("./packages/ui/src/redux/features/api/slice.ts");const{useUnsubscribeNotificationMutation:use_unsubscribe_notification_mutation}=slice.Qo.injectEndpoints({endpoints:builder=>({unsubscribeNotification:builder.mutation({query:body=>({url:"/me/settings/notifications/unsubscribe",method:"PATCH",body:{type:body.type},headers:{"Content-type":content_type.c.JSON}}),invalidatesTags:(_result,_error,arg)=>[arg.id?{type:"Notification",id:arg.id}:"Notification"]})})});var notifications_slice=__webpack_require__("./packages/ui/src/redux/features/notifications/slice.ts"),hooks=__webpack_require__("./packages/ui/src/redux/hooks/index.ts"),breakpoints=__webpack_require__("./packages/ui/src/theme/breakpoints.ts"),main_module=__webpack_require__("./packages/ui/src/theme/main.module.scss"),notification_module=__webpack_require__("./packages/ui/src/entities/notification/notification.module.scss");const Actions=({notification})=>{const dispatch=(0,hooks.f)(),is_mobile=(0,use_media_query.A)(breakpoints.L.down("mobile")),[unsubscribe,{isLoading:is_loading,isError:is_error,isSuccess:is_success}]=use_unsubscribe_notification_mutation(),can_unsubscribe=![notification_type._.SYSTEM,notification_type._.LOGIN_ATTEMPT].includes(notification.type);react.useEffect((()=>{dispatch((0,notifications_slice.fG)(notification))}),[dispatch,notification]);return is_mobile?null:(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.A)(main_module.A.flex,notification_module.A.actions),children:[(0,jsx_runtime.jsx)(icon_button.A,{"aria-label":"Mark notification as read",check_auth:!0,onClick:()=>{dispatch((0,notifications_slice.Q8)([notification.id,!0]))},title:"Mark as read",variant:"ghost",children:(0,jsx_runtime.jsx)(check.A,{})}),notification.is_subscribed&&can_unsubscribe&&!is_success?(0,jsx_runtime.jsx)(icon_button.A,{"aria-label":"Unsubscribe from this type of notification in the future",check_auth:!0,color:!is_loading&&is_error?"ruby":"inverted",loading:is_loading,onClick:()=>{unsubscribe({id:notification.id,type:notification.type})},title:"Unsubscribe from this type of notification in the future",variant:"ghost",children:(0,jsx_runtime.jsx)(bell_off,{})}):null]})},actions=Actions;Actions.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{notification:{required:!0,tsType:{name:"Notification"},description:""}}}}}]);