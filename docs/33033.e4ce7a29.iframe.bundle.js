"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[33033],{"./packages/editor/src/atoms/history/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ac:()=>can_redo_atom,UL:()=>can_undo_atom,l:()=>undo_manager_atom});var jotai__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/jotai/esm/vanilla.mjs");const can_undo_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(!1),can_redo_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(!1),undo_manager_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(null)},"./packages/editor/src/components/register-tools/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>register_tools});var LexicalLink_prod=__webpack_require__("./node_modules/@lexical/link/LexicalLink.prod.mjs"),LexicalList_prod=__webpack_require__("./node_modules/@lexical/list/LexicalList.prod.mjs"),LexicalComposerContext_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),LexicalUtils_prod=__webpack_require__("./node_modules/@lexical/utils/LexicalUtils.prod.mjs"),react=__webpack_require__("./node_modules/jotai/esm/react.mjs"),Lexical_prod=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),compiled_react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),text_style=__webpack_require__("./packages/editor/src/atoms/text-style/index.ts"),alignment=__webpack_require__("./packages/editor/src/atoms/alignment/index.ts"),indentation=__webpack_require__("./packages/editor/src/atoms/indentation/index.ts"),atoms_history=__webpack_require__("./packages/editor/src/atoms/history/index.ts"),is_caption_selection=__webpack_require__("./packages/editor/src/atoms/is-caption-selection/index.ts"),constants_text_style=__webpack_require__("./packages/editor/src/constants/text-style/index.tsx"),constants_indentation=__webpack_require__("./packages/editor/src/constants/indentation/index.ts"),constants_alignment=__webpack_require__("./packages/editor/src/constants/alignment/index.tsx"),caption=__webpack_require__("./packages/editor/src/nodes/caption/caption.ts"),heading=__webpack_require__("./packages/editor/src/nodes/heading/heading.ts"),get_selected_node=__webpack_require__("./packages/editor/src/utils/get-selected-node/index.ts");const LIST_TYPE_TEXT_STYLE_MAP={bullet:constants_text_style.xJ.BULLETED_LIST,number:constants_text_style.xJ.NUMBERED_LIST},register_tools=()=>((()=>{const[editor]=(0,LexicalComposerContext_prod.DF)(),set_text_style=(0,react.Xr)(text_style.u),set_alignment=(0,react.Xr)(alignment.q),set_link=(0,react.Xr)(text_style.Rl),set_bold=(0,react.Xr)(text_style.qn),set_italic=(0,react.Xr)(text_style.hp),set_underline=(0,react.Xr)(text_style.P7),set_strikethrough=(0,react.Xr)(text_style.Il),set_subscript=(0,react.Xr)(text_style.A0),set_superscript=(0,react.Xr)(text_style.vb),set_code=(0,react.Xr)(text_style.ob),set_can_indent=(0,react.Xr)(indentation.a),set_can_outdent=(0,react.Xr)(indentation.B),set_can_undo=(0,react.Xr)(atoms_history.UL),set_can_redo=(0,react.Xr)(atoms_history.Ac),set_is_caption_selection=(0,react.Xr)(is_caption_selection.b),$update_tools=compiled_react.useCallback((()=>{const selection=(0,Lexical_prod.vJ)();if((0,Lexical_prod.I2)(selection)){const anchor_node=selection.anchor.getNode();let element="root"===anchor_node.getKey()?anchor_node:(0,LexicalUtils_prod.Bt)(anchor_node,(e=>{const parent=e.getParent();return null!==parent&&(0,Lexical_prod.Iq)(parent)}));null===element&&(element=anchor_node.getTopLevelElementOrThrow());const element_key=element.getKey(),element_dom=editor.getElementByKey(element_key);set_bold(selection.hasFormat("bold")),set_italic(selection.hasFormat("italic")),set_underline(selection.hasFormat("underline")),set_strikethrough(selection.hasFormat("strikethrough")),set_subscript(selection.hasFormat("subscript")),set_superscript(selection.hasFormat("superscript")),set_code(selection.hasFormat("code"));const node=(0,get_selected_node.M)(selection),parent=node.getParent();let is_caption=(0,caption.tN)(node)||(0,caption.tN)(parent);if((0,LexicalLink_prod.FJ)(parent)||(0,LexicalLink_prod.FJ)(node)?(set_link(!0),is_caption=(0,caption.tN)(null==parent?void 0:parent.getParent())):set_link(!1),null!==element_dom)if((0,LexicalList_prod.HY)(element)){const parent_list=(0,LexicalUtils_prod.eu)(anchor_node,LexicalList_prod.v5),type=parent_list?parent_list.getListType():element.getListType();set_text_style(LIST_TYPE_TEXT_STYLE_MAP[type])}else{const type=(0,heading.T_)(element)?element.get_tag():element.getType();type in constants_text_style.IA&&set_text_style(constants_text_style.IA[type])}set_is_caption_selection(is_caption);const indentation=(0,Lexical_prod.ff)(node)?node.getIndent():(null==parent?void 0:parent.getIndent())||0;set_can_indent(!is_caption&&indentation<constants_indentation.f),set_can_outdent(!is_caption&&indentation>0);const alignment=((0,Lexical_prod.ff)(node)?node.getFormatType():null==parent?void 0:parent.getFormatType())||constants_alignment.C.LEFT;!is_caption&&Object.values(constants_alignment.C).includes(alignment)?set_alignment(alignment):set_alignment(void 0)}}),[]);compiled_react.useEffect((()=>(0,LexicalUtils_prod.Sd)(editor.registerUpdateListener((({editorState:editor_state})=>editor_state.read($update_tools))),editor.registerCommand(Lexical_prod.Mv,(()=>($update_tools(),!1)),Lexical_prod.d),editor.registerCommand(Lexical_prod.Kf,(payload=>(set_can_undo(payload),!1)),Lexical_prod.d),editor.registerCommand(Lexical_prod.WW,(payload=>(set_can_redo(payload),!1)),Lexical_prod.d))),[$update_tools,editor])})(),null)},"./packages/editor/src/utils/get-selected-node/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>get_selected_node});var _lexical_selection__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@lexical/selection/LexicalSelection.prod.mjs");const get_selected_node=selection=>{const anchor=selection.anchor,focus=selection.focus,anchor_node=selection.anchor.getNode(),focus_node=selection.focus.getNode();return anchor_node===focus_node?anchor_node:selection.isBackward()?(0,_lexical_selection__WEBPACK_IMPORTED_MODULE_0__.Nx)(focus)?anchor_node:focus_node:(0,_lexical_selection__WEBPACK_IMPORTED_MODULE_0__.Nx)(anchor)?anchor_node:focus_node}}}]);