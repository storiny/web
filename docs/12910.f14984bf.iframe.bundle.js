"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[12910],{"./packages/editor/src/atoms/awareness/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>awareness_atom});const awareness_atom=(0,__webpack_require__("./node_modules/jotai/esm/vanilla.mjs").eU)(null)},"./packages/editor/src/atoms/history/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ac:()=>can_redo_atom,UL:()=>can_undo_atom,l:()=>undo_manager_atom});var jotai__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/jotai/esm/vanilla.mjs");const can_undo_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(!1),can_redo_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(!1),undo_manager_atom=(0,jotai__WEBPACK_IMPORTED_MODULE_0__.eU)(null)},"./packages/editor/src/nodes/code-block/component/editor/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>editor});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),dist=__webpack_require__("./node_modules/@codemirror/state/dist/index.js"),view_dist=__webpack_require__("./node_modules/@codemirror/view/dist/index.js"),LexicalComposerContext_prod=__webpack_require__("./node_modules/@lexical/react/LexicalComposerContext.prod.mjs"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),react=__webpack_require__("./node_modules/jotai/esm/react.mjs"),Lexical_prod=__webpack_require__("./node_modules/lexical/Lexical.prod.mjs"),compiled_react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),bundle_esm=__webpack_require__("./node_modules/use-resize-observer/dist/bundle.esm.js"),context_blog=__webpack_require__("./apps/web/src/common/context/blog.tsx"),divider=__webpack_require__("./packages/ui/src/components/divider/divider.tsx"),option_option=__webpack_require__("./packages/ui/src/components/option/option.tsx"),select_select=__webpack_require__("./packages/ui/src/components/select/select.tsx"),spinner=__webpack_require__("./packages/ui/src/components/spinner/spinner.tsx"),tooltip=__webpack_require__("./packages/ui/src/components/tooltip/tooltip.tsx"),typography=__webpack_require__("./packages/ui/src/components/typography/typography.tsx"),create_svg_icon=__webpack_require__("./packages/ui/src/utils/create-svg-icon/create-svg-icon.tsx");const TerminalIcon=(0,jsx_runtime.jsx)("path",{d:"m4 4.8 1.5 1.5L4 7.8m2.5 0H8M1.5 3.3a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-6Z"}),terminal=(0,create_svg_icon.S)(TerminalIcon,"terminal");var warning=__webpack_require__("./packages/ui/src/icons/warning/index.tsx"),selectors=__webpack_require__("./packages/ui/src/redux/features/preferences/selectors.ts"),hooks=__webpack_require__("./packages/ui/src/redux/hooks/index.ts"),main_module=__webpack_require__("./packages/ui/src/theme/main.module.scss"),atoms_history=__webpack_require__("./packages/editor/src/atoms/history/index.ts"),atoms_awareness=__webpack_require__("./packages/editor/src/atoms/awareness/index.ts"),story_metadata=__webpack_require__("./packages/editor/src/atoms/story-metadata/index.ts"),code_block=__webpack_require__("./packages/editor/src/nodes/code-block/code-block.tsx"),dev_log=__webpack_require__("./packages/shared/src/utils/dev-log/index.ts"),icon_button=__webpack_require__("./packages/ui/src/components/icon-button/icon-button.tsx"),use_toast=__webpack_require__("./packages/ui/src/components/toast/use-toast/use-toast.tsx"),copy=__webpack_require__("./packages/ui/src/icons/copy/index.tsx"),copy_to_clipboard=__webpack_require__("./packages/ui/src/utils/copy-to-clipboard/copy-to-clipboard.ts"),editor_module=__webpack_require__("./packages/editor/src/nodes/code-block/component/editor/editor.module.scss");const CopyCodeAction=({view})=>{const toast=(0,use_toast.w)(),copy_code_content=compiled_react.useCallback((async()=>{if(null!==view)try{var _view_state_doc_toString;const content=null!==(_view_state_doc_toString=view.state.doc.toString())&&void 0!==_view_state_doc_toString?_view_state_doc_toString:"";await(0,copy_to_clipboard.D)(content),toast("Copied to clipboard","success")}catch(error){dev_log.y.error(error),toast("Unable to copy the code","error")}}),[toast,view]);return(0,jsx_runtime.jsx)(tooltip.A,{content:"Copy code content",children:(0,jsx_runtime.jsx)(icon_button.A,{className:(0,clsx_m.$)(editor_module.A.x,editor_module.A.action),onClick:copy_code_content,variant:"ghost",children:(0,jsx_runtime.jsx)(copy.A,{})})})},copy_code_action=CopyCodeAction;CopyCodeAction.__docgenInfo={description:"",methods:[],displayName:"CopyCodeAction",props:{view:{required:!0,tsType:{name:"union",raw:"EditorView | null",elements:[{name:"EditorView"},{name:"null"}]},description:"The editor view"}}};var index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),form_form=__webpack_require__("./packages/ui/src/components/form/form.tsx"),form_input=__webpack_require__("./packages/ui/src/components/form-input/form-input.tsx"),modal=__webpack_require__("./packages/ui/src/components/modal/modal.tsx"),use_modal=__webpack_require__("./packages/ui/src/components/modal/use-modal/use-modal.tsx"),footer_button=__webpack_require__("./packages/ui/src/components/modal/footer-button/footer-button.tsx"),spacer=__webpack_require__("./packages/ui/src/components/spacer/spacer.tsx"),use_media_query=__webpack_require__("./packages/ui/src/hooks/use-media-query/index.ts"),icons_code_block=__webpack_require__("./packages/ui/src/icons/code-block/index.tsx"),breakpoints=__webpack_require__("./packages/ui/src/theme/breakpoints.ts"),messages=__webpack_require__("./packages/shared/src/constants/messages/index.ts"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs");const CODE_BLOCK_TITLE_SCHEMA=lib.z.object({title:lib.z.string().max(64,messages.r.max("title",64))});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),title_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[3]!./packages/editor/src/nodes/code-block/component/editor/components/title/title.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(title_module.A,options);const title_title_module=title_module.A&&title_module.A.locals?title_module.A.locals:void 0,CodeBlockTitleModal=()=>(0,jsx_runtime.jsxs)(compiled_react.Fragment,{children:[(0,jsx_runtime.jsx)(modal.V,{asChild:!0,children:(0,jsx_runtime.jsx)(typography.A,{color:"minor",level:"body2",children:"Set a title for the code block. This can represent the file name or an arbitrary text."})}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:5}),(0,jsx_runtime.jsx)(form_input.A,{autoComplete:"off",autoFocus:!0,auto_size:!0,"data-testid":"title-input",form_slot_props:{form_item:{className:main_module.A["f-grow"]}},label:"Title",maxLength:64,name:"title",placeholder:"Title for the code block",required:!0}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:2})]}),EditableTitle=({title,node_key})=>{const[editor]=(0,LexicalComposerContext_prod.DF)(),is_smaller_than_mobile=(0,use_media_query.A)(breakpoints.L.down("mobile")),form=(0,index_esm.mN)({resolver:(0,zod.u)(CODE_BLOCK_TITLE_SCHEMA),defaultValues:{title}}),handle_submit=values=>{editor.update((()=>{const node=(0,Lexical_prod.ns)(node_key);(0,code_block.im)(node)&&node.set_title(values.title||"")})),close_modal()},[element,,close_modal]=(0,use_modal.K)((({open_modal})=>(0,jsx_runtime.jsx)(typography.A,{as:"button",className:(0,clsx_m.$)(main_module.A.ellipsis,title_title_module.x,title_title_module.title,Boolean(title)&&title_title_module["has-title"]),onClick:open_modal,type:"button",children:title||"Edit title"})),(0,jsx_runtime.jsx)(form_form.A,{className:main_module.A["flex-col"],on_submit:handle_submit,provider_props:form,children:(0,jsx_runtime.jsx)(CodeBlockTitleModal,{})}),{fullscreen:is_smaller_than_mobile,footer:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(footer_button.A,{compact:is_smaller_than_mobile,variant:"ghost",children:"Cancel"}),(0,jsx_runtime.jsx)(footer_button.A,{compact:is_smaller_than_mobile,disabled:!form.formState.isDirty,onClick:event=>{event.preventDefault(),form.handleSubmit(handle_submit)()},children:"Confirm"})]}),slot_props:{footer:{compact:is_smaller_than_mobile},content:{style:{width:is_smaller_than_mobile?"100%":"350px"}},header:{decorator:(0,jsx_runtime.jsx)(icons_code_block.A,{}),children:"Set code block title"}}});return element},ReadOnlyTitle=({title})=>(0,jsx_runtime.jsx)(typography.A,{className:(0,clsx_m.$)(main_module.A.ellipsis,title_title_module.x,title_title_module.title,title_title_module["read-only"],Boolean(title)&&title_title_module["has-title"]),children:title||""}),CodeBlockTitle=props=>props.read_only?(0,jsx_runtime.jsx)(ReadOnlyTitle,{...props}):(0,jsx_runtime.jsx)(EditableTitle,{...props}),title_title=CodeBlockTitle;CodeBlockTitle.__docgenInfo={description:"",methods:[],displayName:"CodeBlockTitle",props:{node_key:{required:!0,tsType:{name:"NodeKey"},description:"The key of the code block node"},read_only:{required:!0,tsType:{name:"boolean"},description:"The read-only flag"},title:{required:!0,tsType:{name:"string"},description:"The title of the code block"}}};const TextUnwrapIcon=(0,jsx_runtime.jsx)("path",{d:"M2 3h5M2 9h5M2 6h8.5m0 0L9 4.5M10.5 6 9 7.5"}),text_unwrap=(0,create_svg_icon.S)(TextUnwrapIcon,"text-unwrap"),TextWrapIcon=(0,jsx_runtime.jsx)("path",{d:"M2 3h8M2 9h2.5M2 6h6.5a1.5 1.5 0 0 1 0 3h-2m0 0 1-1m-1 1 1 1"}),text_wrap=(0,create_svg_icon.S)(TextWrapIcon,"text-wrap"),WrapLinesAction=({view,wrap_compartment})=>{const wrap_lines_preference=(0,hooks.m)((state=>state.preferences.enable_code_wrapping)),[wrap_lines,set_wrap_lines]=compiled_react.useState(wrap_lines_preference);return compiled_react.useEffect((()=>{null!==view&&view.dispatch({effects:wrap_compartment.reconfigure(wrap_lines?view_dist.Lz.lineWrapping:[])})}),[view,wrap_compartment,wrap_lines]),(0,jsx_runtime.jsx)(tooltip.A,{content:(wrap_lines?"Unwrap":"Wrap")+" lines",children:(0,jsx_runtime.jsx)(icon_button.A,{className:(0,clsx_m.$)(editor_module.A.x,editor_module.A.action),onClick:()=>set_wrap_lines((prev_state=>!prev_state)),variant:"ghost",children:wrap_lines?(0,jsx_runtime.jsx)(text_unwrap,{}):(0,jsx_runtime.jsx)(text_wrap,{})})})},wrap_lines_action=WrapLinesAction;WrapLinesAction.__docgenInfo={description:"",methods:[],displayName:"WrapLinesAction",props:{view:{required:!0,tsType:{name:"union",raw:"EditorView | null",elements:[{name:"EditorView"},{name:"null"}]},description:"The editor view"},wrap_compartment:{required:!0,tsType:{name:"Compartment"},description:"The wrap compartment"}}};var common=__webpack_require__("./packages/editor/src/nodes/code-block/component/editor/extensions/common/index.ts"),language_dist=__webpack_require__("./node_modules/@codemirror/language/dist/index.js");class EmptyMarker extends view_dist.wJ{toDOM(){return document.createTextNode("Ã¸")}}const empty_marker=new EmptyMarker,gutter_extensions=[(0,view_dist.$K)(),(0,view_dist.Wu)(),(0,language_dist.Lv)({markerDOM:open=>{const marker=document.createElement("span");return marker.className="cm-foldMarker",marker.dataset.open=String(open),marker}}),(0,view_dist.cU)({class:"cm-emptyLines",initialSpacer:()=>empty_marker,lineMarker:(view,line)=>line.from==line.to?empty_marker:null})],CODE_BLOCK_LANGUAGE_MAP={c:"C",cassandra:"CQL",clojure:"Clojure",clojurescript:"ClojureScript",cmake:"CMake",cobol:"COBOL",coffeescript:"CoffeeScript",common_lisp:"Common Lisp",cpp:"C++",crystal:"Crystal",csharp:"C#",css:"CSS",d:"D",dart:"Dart",diff:"Diff",dockerfile:"Dockerfile",elm:"Elm",erlang:"Erlang",f_sharp:"F#",fortran:"Fortran",go:"Go",groovy:"Groovy",haskell:"Haskell",haxe:"Haxe",html:"HTML",http:"HTTP",java:"Java",javascript:"JavaScript",json:"JSON",jsonld:"JSON-LD",jsx:"JSX",julia:"Julia",kotlin:"Kotlin",less:"LESS",livescript:"LiveScript",lua:"Lua",mariasql:"MariaDB SQL",markdown:"Markdown",mathematica:"Mathematica",mssql:"MS SQL",mysql:"MySQL",nginx:"Nginx",o_caml:"OCaml",objective_c:"Objective-C",objective_cpp:"Objective-C++",octave:"Octave",pascal:"Pascal",perl:"Perl",php:"PHP",plsql:"PL/SQL",postgresql:"PostgreSQL",power_shell:"PowerShell",protobuf:"Protobuf",puppet:"Puppet",python:"Python",q:"Q",r:"R",ruby:"Ruby",rust:"Rust",scss:"SCSS",sass:"Sass",scala:"Scala",scheme:"Scheme",shell:"Shell",smalltalk:"Smalltalk",sml:"SML",solr:"Solr",sql:"SQL",sqlite:"SQLite",stex:"LaTeX",stylus:"Stylus",swift:"Swift",tcl:"Tcl",toml:"TOML",tsx:"TSX",typescript:"TypeScript",velocity:"Velocity",verilog:"Verilog",wast:"Web Assembly",xml:"XML",yaml:"YAML"},get_language_support=async language=>{switch(language){case"javascript":case"typescript":case"jsx":case"tsx":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(95985)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-javascript/dist/index.js"))).javascript({jsx:["jsx","tsx"].includes(language),typescript:["typescript","tsx"].includes(language)});case"html":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(95985),__webpack_require__.e(15354),__webpack_require__.e(57154)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-html/dist/index.js"))).html({autoCloseTags:!0,matchClosingTags:!0,selfClosingTags:!1});case"c":case"cpp":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(61494)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-cpp/dist/index.js"))).cpp();case"css":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(15354)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-css/dist/index.js"))).css();case"java":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(26645)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-java/dist/index.js"))).java();case"json":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(21250)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-json/dist/index.js"))).json();case"markdown":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(95985),__webpack_require__.e(15354),__webpack_require__.e(57154),__webpack_require__.e(12047)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-markdown/dist/index.js"))).markdown();case"php":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(95985),__webpack_require__.e(15354),__webpack_require__.e(57154),__webpack_require__.e(33751)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-php/dist/index.js"))).php();case"python":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(44833)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-python/dist/index.js"))).python();case"rust":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(91475)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-rust/dist/index.js"))).rust();case"sql":case"mysql":case"mariasql":case"postgresql":case"cassandra":case"mssql":case"plsql":case"sqlite":const{sql,MySQL,MariaSQL,PostgreSQL,Cassandra,MSSQL,StandardSQL,PLSQL,SQLite}=await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(52747),__webpack_require__.e(46492)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-sql/dist/index.js"));let dialect=StandardSQL;switch(language){case"cassandra":dialect=Cassandra;break;case"mariasql":dialect=MariaSQL;break;case"mssql":dialect=MSSQL;break;case"postgresql":dialect=PostgreSQL;break;case"mysql":dialect=MySQL;break;case"sqlite":dialect=SQLite;break;case"plsql":dialect=PLSQL}return sql({dialect,upperCaseKeywords:!0});case"wast":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(86095)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-wast/dist/index.js"))).wast();case"xml":return(await Promise.all([__webpack_require__.e(27421),__webpack_require__.e(39595)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/lang-xml/dist/index.js"))).xml();default:return(async language=>{let legacy_language=null;switch(language){case"csharp":case"dart":case"kotlin":case"objective_c":case"objective_cpp":case"scala":legacy_language=(await __webpack_require__.e(24528).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/clike.js")))["objective_c"===language?"objectiveC":"objective_cpp"===language?"objectiveCpp":language];break;case"clojure":case"clojurescript":legacy_language=(await __webpack_require__.e(93974).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/clojure.js"))).clojure;break;case"cmake":legacy_language=(await __webpack_require__.e(55317).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/cmake.js"))).cmake;break;case"cobol":legacy_language=(await __webpack_require__.e(58217).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/cobol.js"))).cobol;break;case"coffeescript":legacy_language=(await __webpack_require__.e(82823).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/coffeescript.js"))).coffeeScript;break;case"common_lisp":legacy_language=(await __webpack_require__.e(14797).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/commonlisp.js"))).commonLisp;break;case"crystal":legacy_language=(await __webpack_require__.e(43372).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/crystal.js"))).crystal;break;case"d":legacy_language=(await __webpack_require__.e(55318).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/d.js"))).d;break;case"diff":legacy_language=(await __webpack_require__.e(91991).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/diff.js"))).diff;break;case"dockerfile":legacy_language=(await __webpack_require__.e(17636).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/dockerfile.js"))).dockerFile;break;case"elm":legacy_language=(await __webpack_require__.e(97318).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/elm.js"))).elm;break;case"erlang":legacy_language=(await __webpack_require__.e(90867).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/erlang.js"))).erlang;break;case"fortran":legacy_language=(await __webpack_require__.e(74408).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/fortran.js"))).fortran;break;case"f_sharp":legacy_language=(await __webpack_require__.e(21954).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/mllike.js"))).fSharp;break;case"go":legacy_language=(await __webpack_require__.e(28418).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/go.js"))).go;break;case"groovy":legacy_language=(await __webpack_require__.e(40874).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/groovy.js"))).groovy;break;case"haskell":legacy_language=(await __webpack_require__.e(1986).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/haskell.js"))).haskell;break;case"haxe":legacy_language=(await __webpack_require__.e(56412).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/haxe.js"))).haxe;break;case"http":legacy_language=(await __webpack_require__.e(3112).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/http.js"))).http;break;case"jsonld":legacy_language=(await __webpack_require__.e(85987).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/javascript.js"))).jsonld;break;case"julia":legacy_language=(await __webpack_require__.e(47575).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/julia.js"))).julia;break;case"less":legacy_language=(await __webpack_require__.e(59137).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/css.js"))).less;break;case"livescript":legacy_language=(await __webpack_require__.e(27881).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/livescript.js"))).liveScript;break;case"lua":legacy_language=(await __webpack_require__.e(41960).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/lua.js"))).lua;break;case"mathematica":legacy_language=(await __webpack_require__.e(95862).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/mathematica.js"))).mathematica;break;case"nginx":legacy_language=(await __webpack_require__.e(98326).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/nginx.js"))).nginx;break;case"o_caml":legacy_language=(await __webpack_require__.e(21954).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/mllike.js"))).oCaml;break;case"octave":legacy_language=(await __webpack_require__.e(7260).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/octave.js"))).octave;break;case"pascal":legacy_language=(await __webpack_require__.e(38232).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/pascal.js"))).pascal;break;case"perl":legacy_language=(await __webpack_require__.e(73709).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/perl.js"))).perl;break;case"power_shell":legacy_language=(await __webpack_require__.e(26145).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/powershell.js"))).powerShell;break;case"protobuf":legacy_language=(await __webpack_require__.e(73303).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/protobuf.js"))).protobuf;break;case"puppet":legacy_language=(await __webpack_require__.e(54878).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/puppet.js"))).puppet;break;case"q":legacy_language=(await __webpack_require__.e(30089).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/q.js"))).q;break;case"r":legacy_language=(await __webpack_require__.e(97136).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/r.js"))).r;break;case"ruby":legacy_language=(await __webpack_require__.e(44616).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/ruby.js"))).ruby;break;case"sass":legacy_language=(await Promise.all([__webpack_require__.e(59137),__webpack_require__.e(52082)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/sass.js"))).sass;break;case"scheme":legacy_language=(await __webpack_require__.e(42959).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/scheme.js"))).scheme;break;case"scss":legacy_language=(await __webpack_require__.e(59137).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/css.js"))).sCSS;break;case"shell":legacy_language=(await __webpack_require__.e(50084).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/shell.js"))).shell;break;case"smalltalk":legacy_language=(await __webpack_require__.e(8368).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/smalltalk.js"))).smalltalk;break;case"solr":legacy_language=(await __webpack_require__.e(82280).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/solr.js"))).solr;break;case"sml":legacy_language=(await __webpack_require__.e(21954).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/mllike.js"))).sml;break;case"stylus":legacy_language=(await __webpack_require__.e(84462).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/stylus.js"))).stylus;break;case"swift":legacy_language=(await __webpack_require__.e(90321).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/swift.js"))).swift;break;case"stex":legacy_language=(await __webpack_require__.e(89746).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/stex.js"))).stex;break;case"tcl":legacy_language=(await __webpack_require__.e(91189).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/tcl.js"))).tcl;break;case"toml":legacy_language=(await __webpack_require__.e(56460).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/toml.js"))).toml;break;case"velocity":legacy_language=(await __webpack_require__.e(2467).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/velocity.js"))).velocity;break;case"verilog":legacy_language=(await __webpack_require__.e(14372).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/verilog.js"))).verilog;break;case"yaml":legacy_language=(await __webpack_require__.e(30731).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@codemirror/legacy-modes/mode/yaml.js"))).yaml}return null!==legacy_language?new language_dist.Yy(language_dist.Tg.define(legacy_language)):legacy_language})(language)}};var highlight_dist=__webpack_require__("./node_modules/@lezer/highlight/dist/index.js");const auto_link_extension_styles={".cm-link-icon":{"& img":{display:"block",userSelect:"none"},cursor:"pointer",display:"inline-block",marginLeft:"0.2ch",verticalAlign:"middle"}},gutter_extension_styles={"& .cm-gutter":{"& *":{fontFamily:"var(--font-code, var(--font-monospace))"},userSelect:"none","&.cm-emptyLines":{color:"var(--fg-muted)",opacity:.45,pointerEvents:"none",textAlign:"center",width:"18px"},...{"&.cm-foldGutter":{"& .cm-foldMarker":{"&:hover":{opacity:.75},'&[data-open="false"]':{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguMzggOC4xNXEtLjIzLS4yMy0uMjMtLjU1IDAtLjMyLjIzLS41NWwzLTNxLjEyLS4xMi4yOC0uMTkuMTctLjA2LjM0LS4wNnQuMzQuMDZxLjE2LjA3LjI4LjE5bDMuMDMgMy4wM3EuMjMuMjIuMjEuNTMtLjAxLjMyLS4yMy41NC0uMi4yLS41My4ydC0uNTUtLjJMMTIgNS42IDkuNDUgOC4xNXEtLjIzLjIzLS41NS4yMS0uMzMtLjAxLS41My0uMjFaTTEyIDIwLjI1cS0uMTcgMC0uMzQtLjA2LS4xNi0uMDctLjI4LS4xOWwtMy0zcS0uMjMtLjIzLS4yMy0uNTUgMC0uMzMuMjMtLjUzLjItLjIyLjUyLS4yMnQuNTUuMjNMMTIgMTguNDZsMi41NS0yLjU3cS4yMy0uMjMuNTUtLjIxLjMzLjAxLjUzLjIzLjIyLjIuMjIuNTN0LS4yMi41NWwtMyAzcS0uMTMuMTMtLjMuMTktLjE1LjA2LS4zMy4wNloiLz48L3N2Zz4")'},backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEyIDkuMThxLS4xNyAwLS4zNC0uMDctLjE2LS4wNi0uMjgtLjE4bC0zLTNxLS4yMy0uMjMtLjIzLS41MyAwLS4zLjIzLS41My4yMi0uMjIuNTItLjIyLjMgMCAuNTMuMjNMMTIgNy40NWwyLjU4LTIuNThxLjIyLS4yMi41Mi0uMjIuMyAwIC41My4yMy4yMi4yMi4yMi41MiAwIC4zLS4yMy41M2wtMyAzcS0uMTIuMTItLjI4LjE4LS4xNy4wNy0uMzQuMDdabS0zLjYzIDkuOTVxLS4yMi0uMjMtLjIyLS41MyAwLS4zLjIzLS41M2wzLTNxLjEyLS4xMi4yOC0uMTguMTctLjA2LjM0LS4wNnQuMzQuMDZxLjE2LjA2LjI4LjE5bDMuMDMgMy4wMnEuMi4yLjIuNXQtLjIzLjUzcS0uMjIuMjItLjUyLjIyLS4zIDAtLjUzLS4yM0wxMiAxNi41NWwtMi41OCAyLjU4cS0uMjIuMjItLjUyLjIyLS4zIDAtLjUzLS4yM1oiLz48L3N2Zz4")',backgroundPosition:"150% 15%",backgroundRepeat:"no-repeat",backgroundSize:"110%",display:"inline-block",height:"16px",width:"12px",opacity:.45,verticalAlign:"middle"},"& .cm-gutterElement":{pointerEvents:"auto"},pointerEvents:"none",position:"absolute",right:"2px",zIndex:1}}},"& .cm-gutter.cm-lineNumbers":{"& .cm-gutterElement":{color:"var(--fg-muted)",opacity:.65},marginLeft:"6px"},"&.cm-focused .cm-gutter.cm-lineNumbers":{"& .cm-gutterElement":{"&.cm-activeLineGutter":{color:"var(--fg-major)"}}}},tooltip_extension_styles={"& .cm-tooltip":{"& > ul":{"& li":{fontFamily:"var(--font-code, var(--font-monospace))",fontSize:"12px",paddingBlock:"3px !important",borderRadius:"var(--radius-sm)",maxWidth:"calc(100% - 6px)",marginInline:"3px","&:hover":{background:"var(--inverted-50) !important",color:"var(--fg-major)"},"&[aria-selected]":{background:"var(--inverted-400) !important",color:"var(--inverted-0) !important"},"&:first-of-type":{marginTop:"3px"},"&:last-of-type":{marginBottom:"3px"}}},backgroundColor:"var(--bg-elevation-xs)",boxShadow:"var(--shadow-sm)",border:"1px solid var(--divider)",borderRadius:"var(--radius-sm)",color:"var(--fg-minor)",overflow:"hidden"}},extend_code_block_theme=({mode,styles,read_only})=>{const theme_options={"&":{fontSize:"13px",backgroundColor:"var(--bg-body)",color:"var(--fg-major)",outline:"none"},"& .cm-activeLineGutter":{backgroundColor:"transparent"},"& .cm-content":{caretColor:"var(--fg-major)",paddingInline:"8px"},"& .cm-cursor, .cm-dropCursor":{borderLeftColor:"var(--fg-major)"},"& .cm-foldMarker":{filter:"dark"===mode?"invert(1)":"none"},"& .cm-foldPlaceholder":{"&:hover":{"&:active":{backgroundColor:"var(--bg-elevation-lg)"},backgroundColor:"var(--bg-elevation-md)",color:"var(--fg-major)"},backgroundColor:"var(--bg-elevation-sm)",border:"1px solid var(--divider)",color:"var(--fg-minor)",padding:"0 5px"},"& .cm-gutters":{"&:after":{borderRight:"1px solid var(--divider)",content:'""',position:"absolute",width:"calc(100% + 1px)",height:"calc(100% + 12px)",top:"-6px",zIndex:-1,opacity:.75},backgroundColor:"var(--bg-body)",border:"none"},"& .cm-scroller":{fontFamily:"var(--font-code, var(--font-monospace)) !important",outline:"none",padding:"6px 0","&::-webkit-scrollbar":{height:"10px"},"&::-webkit-scrollbar-thumb":{border:"2px solid var(--inverted-50)",borderRadius:"var(--radius-lg)",backgroundColor:"var(--inverted-200)","&:hover":{backgroundColor:"var(--inverted-400)"}},"&::-webkit-scrollbar-track":{backgroundColor:"var(--inverted-50)",borderTop:"1px solid var(--divider)",boxShadow:"none"}},"&.cm-focused":{"& .cm-selectionBackground, ::selection":{backgroundColor:"var(--bg-selection) !important"},"& .cm-selectionMatch, & .cm-matchingBracket":{backgroundColor:"var(--inverted-50)",borderRadius:"var(--radius-xs)",outline:"1px solid var(--inverted-300)"},outline:"none !important"},"&:not(.cm-focused)":{"& .cm-selectionMatch, & .cm-matchingBracket":{backgroundColor:"transparent"},"& .cm-selectionBackground, ::selection":{backgroundColor:(read_only?"var(--bg-selection)":"transparent")+" !important"}},...auto_link_extension_styles,...gutter_extension_styles,...tooltip_extension_styles};return[view_dist.Lz.theme(theme_options,{dark:"dark"===mode}),(0,language_dist.y9)(language_dist.cr.define(styles))]},CODE_BLOCK_DARK_THEME=read_only=>extend_code_block_theme({mode:"dark",read_only,styles:[{tag:[highlight_dist._A.keyword,highlight_dist._A.controlKeyword,highlight_dist._A.operatorKeyword,highlight_dist._A.moduleKeyword],color:"#f38ba8"},{tag:[highlight_dist._A.operator,highlight_dist._A.punctuation,highlight_dist._A.separator,highlight_dist._A.escape],color:"#cdd6f4"},{tag:[highlight_dist._A.variableName],color:"#cdd6f4"},{tag:[highlight_dist._A.propertyName],color:"#f2cdcd"},{tag:[highlight_dist._A.constant(highlight_dist._A.name),highlight_dist._A.bool,highlight_dist._A.atom,highlight_dist._A.special(highlight_dist._A.variableName)],color:"#fab387"},{tag:[highlight_dist._A.string,highlight_dist._A.special(highlight_dist._A.string),highlight_dist._A.inserted],color:"#a6e3a1"},{tag:[highlight_dist._A.number],color:"#f9e2af"},{tag:[highlight_dist._A.typeName,highlight_dist._A.className,highlight_dist._A.namespace,highlight_dist._A.tagName],color:"#89b4fa"},{tag:[highlight_dist._A.function(highlight_dist._A.variableName),highlight_dist._A.function(highlight_dist._A.propertyName)],color:"#cba6f7"},{tag:[highlight_dist._A.labelName,highlight_dist._A.macroName],color:"#f5c2e7"},{tag:[highlight_dist._A.heading],color:"#b4befe",fontWeight:"bold"},{tag:[highlight_dist._A.comment,highlight_dist._A.meta],color:"#6c7086",fontStyle:"italic"},{tag:[highlight_dist._A.link],color:"#89dceb",textDecoration:"underline"},{tag:[highlight_dist._A.regexp],color:"#94e2d5"},{tag:[highlight_dist._A.annotation],color:"#f9e2af"},{tag:[highlight_dist._A.changed],color:"#f9e2af"},{tag:[highlight_dist._A.deleted],color:"#eba0ac"},{tag:[highlight_dist._A.invalid],color:"#f38ba8"},{tag:[highlight_dist._A.angleBracket],color:"#89b4fa"},{tag:[highlight_dist._A.strong],fontWeight:"bold"},{tag:[highlight_dist._A.emphasis],fontStyle:"italic"},{tag:[highlight_dist._A.strikethrough],textDecoration:"line-through"}]}),CODE_BLOCK_LIGHT_THEME=read_only=>extend_code_block_theme({mode:"light",read_only,styles:[{tag:[highlight_dist._A.keyword,highlight_dist._A.controlKeyword,highlight_dist._A.operatorKeyword,highlight_dist._A.moduleKeyword],color:"#d20f39"},{tag:[highlight_dist._A.operator,highlight_dist._A.punctuation,highlight_dist._A.separator,highlight_dist._A.escape],color:"#4c4f69"},{tag:[highlight_dist._A.variableName],color:"#4c4f69"},{tag:[highlight_dist._A.propertyName],color:"#dd7878"},{tag:[highlight_dist._A.constant(highlight_dist._A.name),highlight_dist._A.bool,highlight_dist._A.atom,highlight_dist._A.special(highlight_dist._A.variableName)],color:"#fe640b"},{tag:[highlight_dist._A.string,highlight_dist._A.special(highlight_dist._A.string),highlight_dist._A.inserted],color:"#40a02b"},{tag:[highlight_dist._A.number],color:"#df8e1d"},{tag:[highlight_dist._A.typeName,highlight_dist._A.className,highlight_dist._A.namespace,highlight_dist._A.tagName],color:"#1e66f5"},{tag:[highlight_dist._A.function(highlight_dist._A.variableName),highlight_dist._A.function(highlight_dist._A.propertyName)],color:"#8839ef"},{tag:[highlight_dist._A.labelName,highlight_dist._A.macroName],color:"#ea76cb"},{tag:[highlight_dist._A.heading],color:"#7287fd",fontWeight:"bold"},{tag:[highlight_dist._A.comment,highlight_dist._A.meta],color:"#9ca0b0",fontStyle:"italic"},{tag:[highlight_dist._A.link],color:"#04a5e5",textDecoration:"underline"},{tag:[highlight_dist._A.regexp],color:"#179299"},{tag:[highlight_dist._A.annotation],color:"#df8e1d"},{tag:[highlight_dist._A.changed],color:"#df8e1d"},{tag:[highlight_dist._A.deleted],color:"#e64553"},{tag:[highlight_dist._A.invalid],color:"#d20f39"},{tag:[highlight_dist._A.angleBracket],color:"#1e66f5"},{tag:[highlight_dist._A.strong],fontWeight:"bold"},{tag:[highlight_dist._A.emphasis],fontStyle:"italic"},{tag:[highlight_dist._A.strikethrough],textDecoration:"line-through"}]}),CodeBlockEditor=({node_key,content,language,title})=>{const[editor]=(0,LexicalComposerContext_prod.DF)(),code_block_id=compiled_react.useId(),undo_manager=(0,react.md)(atoms_history.l),awareness=(0,react.md)(atoms_awareness.c),story=(0,react.md)(story_metadata._),theme=(0,hooks.m)(selectors.cx),enable_code_gutters=(0,hooks.m)((state=>state.preferences.enable_code_gutters)),{height:container_height,ref:resize_observer_ref}=(0,bundle_esm.A)(),ref=compiled_react.useRef(null),[view,set_view]=compiled_react.useState(null),mounted_ref=compiled_react.useRef(!1),is_reader="reader"===story.role,is_viewer="viewer"===story.role,[loading,set_loading]=compiled_react.useState(editor.isEditable()),[language_status,set_language_status]=compiled_react.useState(null===language?"loaded":"loading"),blog=(0,context_blog.jl)(),language_compartment=compiled_react.useMemo((()=>new dist.xx),[]),wrap_compartment=compiled_react.useMemo((()=>new dist.xx),[]),theme_compartment=compiled_react.useMemo((()=>new dist.xx),[]),gutter_compartment=compiled_react.useMemo((()=>new dist.xx),[]),update_language=compiled_react.useCallback((next_language=>{editor.update((()=>{const node=(0,Lexical_prod.ns)(node_key);(0,code_block.im)(node)&&node.set_language("none"===next_language?null:next_language)}))}),[editor,node_key]),make_editor_editable=compiled_react.useCallback((should_focus=>{if(editor.setEditable(!0),should_focus){const content_editable=document.querySelector("div[data-editor-content]");setTimeout((()=>{content_editable&&(editor.focus(),content_editable.focus())}),10)}}),[editor]),destroy_editor=compiled_react.useCallback((()=>{null!==view&&mounted_ref.current&&view.destroy()}),[view]);return compiled_react.useEffect((()=>{null!==view&&view.dispatch({effects:theme_compartment.reconfigure(("light"===theme?CODE_BLOCK_LIGHT_THEME:CODE_BLOCK_DARK_THEME)(is_reader||is_viewer))})}),[is_reader,is_viewer,theme,theme_compartment,view]),compiled_react.useEffect((()=>{null!==view&&view.dispatch({effects:gutter_compartment.reconfigure(enable_code_gutters?gutter_extensions:[])})}),[enable_code_gutters,gutter_compartment,view]),compiled_react.useEffect((()=>{if(null!==view)if(null!==language){if(!(language in CODE_BLOCK_LANGUAGE_MAP))return set_language_status("loaded"),update_language("none");set_language_status("loading"),get_language_support(language).then((support=>{set_language_status("loaded"),support&&view.dispatch({effects:language_compartment.reconfigure(support)})})).catch((()=>{set_language_status("error")}))}else view.dispatch({effects:language_compartment.reconfigure([])})}),[language,language_compartment,update_language,view]),compiled_react.useEffect((()=>{if(mounted_ref.current)return;mounted_ref.current=!0,destroy_editor();const extensions=[...common.F,gutter_compartment.of(enable_code_gutters?gutter_extensions:[]),theme_compartment.of(("light"===theme?CODE_BLOCK_LIGHT_THEME:CODE_BLOCK_DARK_THEME)(is_reader||is_viewer)),language_compartment.of([]),wrap_compartment.of([])],read_only_extensions=[dist.$t.readOnly.of(!0),view_dist.Lz.editable.of(!1)];return is_reader?(extensions.push(...read_only_extensions),set_view(new view_dist.Lz({parent:ref.current,state:dist.$t.create({doc:content.toString(),extensions})}))):(async()=>{set_loading(!0);const{get_editable_extensions}=await Promise.all([__webpack_require__.e(52747),__webpack_require__.e(96406),__webpack_require__.e(40040)]).then(__webpack_require__.bind(__webpack_require__,"./packages/editor/src/nodes/code-block/component/editor/extensions/editable/index.ts")),editable_extensions=get_editable_extensions({content,editor,node_key,awareness,undo_manager,make_editor_editable});extensions.push(...editable_extensions),is_viewer?extensions.push(...read_only_extensions):extensions.push(view_dist.Lz.updateListener.of((update=>{if(update.focusChanged)if(update.view.hasFocus){if(editor.setEditable(!1),awareness){const local_state=awareness.getLocalState();local_state&&(local_state.focusing=!0,awareness.setLocalState(local_state))}}else if(!document.activeElement||document.activeElement&&!document.activeElement.classList.contains("cm-content")&&!document.activeElement.classList.contains("cm-scroller")){var _document_getElementById_contains,_document_getElementById;update.view.dispatch({selection:{anchor:0}}),make_editor_editable(!(null===(_document_getElementById=document.getElementById(code_block_id))||void 0===_document_getElementById||null===(_document_getElementById_contains=_document_getElementById.contains)||void 0===_document_getElementById_contains?void 0:_document_getElementById_contains.call(_document_getElementById,document.activeElement)))}}))),set_view(new view_dist.Lz({parent:ref.current,state:dist.$t.create({doc:content.toString(),extensions})})),set_loading(!1)})(),destroy_editor}),[code_block_id,awareness,content,destroy_editor,editor,make_editor_editable,node_key,undo_manager,theme_compartment,wrap_compartment,language_compartment,gutter_compartment,is_reader,is_viewer]),(0,jsx_runtime.jsxs)("div",{className:editor_module.A["code-block"],id:code_block_id,children:[(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.$)(editor_module.A.container,main_module.A.grid,main_module.A.dashboard,main_module.A["no-sidenav"]),"data-language":language||"none","data-status":loading?"loading":"loaded","data-testid":"code-block-node",ref:resize_observer_ref,children:(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A["flex-col"],editor_module.A.content,(null==blog?void 0:blog.is_story_minimal_layout)&&editor_module.A["is-blog"]),children:[(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A["flex-center"],editor_module.A.header),children:[(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A.flex,editor_module.A.info),children:[(0,jsx_runtime.jsx)("span",{className:(0,clsx_m.$)(main_module.A["flex-center"],editor_module.A.icon),children:is_reader?"loading"===language_status?(0,jsx_runtime.jsx)(spinner.A,{size:"sm"}):"error"===language_status?(0,jsx_runtime.jsx)(tooltip.A,{content:"Unable to fetch the syntax highlighter",children:(0,jsx_runtime.jsx)(warning.A,{})}):(0,jsx_runtime.jsx)(terminal,{}):(0,jsx_runtime.jsx)(terminal,{})}),(0,jsx_runtime.jsx)(title_title,{node_key,read_only:is_reader||is_viewer,title})]}),(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A["flex-center"],editor_module.A.actions),children:[is_reader||is_viewer?null!==language&&language in CODE_BLOCK_LANGUAGE_MAP?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(typography.A,{className:(0,clsx_m.$)(main_module.A["flex-center"],editor_module.A.language),color:"minor",level:"body2",children:CODE_BLOCK_LANGUAGE_MAP[language]}),(0,jsx_runtime.jsx)(divider.A,{orientation:"vertical"})]}):null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(select_select.A,{onValueChange:update_language,render_trigger:trigger=>(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A["flex-center"],editor_module.A["language-select"],"loaded"!==language_status&&editor_module.A[language_status]),children:["loading"===language_status?(0,jsx_runtime.jsx)(spinner.A,{size:"sm"}):"error"===language_status?(0,jsx_runtime.jsx)(warning.A,{}):null,trigger]}),slot_props:{trigger:{className:(0,clsx_m.$)(editor_module.A.x,editor_module.A.select),"aria-label":"Change code block language"},value:{placeholder:"Language"}},value:language||"none",children:[(0,jsx_runtime.jsx)(option_option.A,{value:"none",children:"None"}),Object.entries(CODE_BLOCK_LANGUAGE_MAP).map((([key,value])=>(0,jsx_runtime.jsx)(option_option.A,{value:key,children:value},key)))]}),(0,jsx_runtime.jsx)(divider.A,{orientation:"vertical"})]}),(0,jsx_runtime.jsx)(wrap_lines_action,{view,wrap_compartment}),(0,jsx_runtime.jsx)(copy_code_action,{view})]})]}),(0,jsx_runtime.jsx)("div",{className:editor_module.A.editor,ref}),loading&&(0,jsx_runtime.jsx)("div",{"aria-hidden":"true",className:(0,clsx_m.$)(main_module.A["flex-center"],main_module.A["full-w"],editor_module.A.skeleton),children:(0,jsx_runtime.jsx)(spinner.A,{})})]})}),(0,jsx_runtime.jsx)("div",{"aria-hidden":!0,style:{height:container_height}})]})},editor=CodeBlockEditor;CodeBlockEditor.__docgenInfo={description:"",methods:[],displayName:"CodeBlockEditor",props:{content:{required:!0,tsType:{name:"YText"},description:""},language:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},node_key:{required:!0,tsType:{name:"NodeKey"},description:""},title:{required:!0,tsType:{name:"string"},description:""}}}},"./packages/ui/src/components/form-input/form-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_input__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/ui/src/components/input/input.tsx"),_form__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/form/form-context.ts"),_form__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/components/form/form-field/form-field.tsx"),_form__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/ui/src/components/form/form-item/form-item.tsx"),_form__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/ui/src/components/form/form-label/form-label.tsx"),_form__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/ui/src/components/form/form-control/form-control.tsx"),_form__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/ui/src/components/form/form-helper-text/form-helper-text.tsx"),_form__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/ui/src/components/form/form-message/form-message.tsx");const FormInput=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((props,ref)=>{const{name,disabled:disabled_prop,required,label,type="text",helper_text,form_slot_props,is_field_disabled=()=>!1,...rest}=props,form=(0,_form__WEBPACK_IMPORTED_MODULE_2__.xW)(),form_context=react__WEBPACK_IMPORTED_MODULE_1__.useContext(_form__WEBPACK_IMPORTED_MODULE_3__.c),disabled=Boolean(form_context.disabled||disabled_prop);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_4__.A,{control:form.control,name,render:({field,fieldState:{invalid,error}})=>{const is_disabled=is_field_disabled(field);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_form__WEBPACK_IMPORTED_MODULE_5__.A,{...null==form_slot_props?void 0:form_slot_props.form_item,disabled:disabled||is_disabled,ref,required,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_6__.A,{...null==form_slot_props?void 0:form_slot_props.label,children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_7__.A,{...null==form_slot_props?void 0:form_slot_props.control,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_input__WEBPACK_IMPORTED_MODULE_8__.A,{...rest,color:invalid||error?"ruby":null==rest?void 0:rest.color,disabled:disabled||is_disabled,required,type,...field,onChange:event=>field.onChange("number"===type?Number.parseInt(event.target.value,10):event.target.value)})}),helper_text&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_9__.A,{...null==form_slot_props?void 0:form_slot_props.helper_text,children:helper_text}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_10__.A,{...null==form_slot_props?void 0:form_slot_props.message})]})}})}));FormInput.displayName="FormInput";const __WEBPACK_DEFAULT_EXPORT__=FormInput;FormInput.__docgenInfo={description:"",methods:[],displayName:"FormInput",props:{form_slot_props:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  control?: React.ComponentPropsWithoutRef<"input">;\n  form_item?: FormItemProps;\n  helper_text?: FormHelperTextProps;\n  label?: FormLabelProps;\n  message?: FormMessageProps;\n}',signature:{properties:[{key:"control",value:{name:"ReactComponentPropsWithoutRef",raw:'React.ComponentPropsWithoutRef<"input">',elements:[{name:"literal",value:'"input"'}],required:!1}},{key:"form_item",value:{name:"FormItemProps",required:!1}},{key:"helper_text",value:{name:"FormHelperTextProps",required:!1}},{key:"label",value:{name:"FormLabelProps",required:!1}},{key:"message",value:{name:"FormMessageProps",required:!1}}]}},description:"The props passed to the individual form elements."},helper_text:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The helper text content placed below the control."},is_field_disabled:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  field: ControllerRenderProps<FieldValues, string>\n) => boolean",signature:{arguments:[{type:{name:"ControllerRenderProps",elements:[{name:"FieldValues"},{name:"string"}],raw:"ControllerRenderProps<FieldValues, string>"},name:"field"}],return:{name:"boolean"}}},description:"Predicate function for determining whether the input is disabled based on the field object.\n@param field"},label:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The label for the form component."},name:{required:!0,tsType:{name:"string"},description:"The name of the form element."}},composes:["InputProps"]}},"./packages/ui/src/icons/code-block/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_utils_create_svg_icon__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./packages/ui/src/utils/create-svg-icon/create-svg-icon.tsx"));const CodeBlockIcon=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{d:"M7.25 2H8.5A1.5 1.5 0 0 1 10 3.5v5A1.5 1.5 0 0 1 8.5 10h-5A1.5 1.5 0 0 1 2 8.5V6m1-3.5-1 1 1 1m2 0 1-1-1-1"}),__WEBPACK_DEFAULT_EXPORT__=(0,_utils_create_svg_icon__WEBPACK_IMPORTED_MODULE_2__.S)(CodeBlockIcon,"code-block")},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[14].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[14].use[3]!./packages/editor/src/nodes/code-block/component/editor/components/title/title.module.scss":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".BZoPrBvrylM6w_O2GGXT.ttiCsKu463qhQL4UsGt4{font-size:14.6px;line-height:19.8px;margin-left:8px;color:var(--fg-muted)}.BZoPrBvrylM6w_O2GGXT.ttiCsKu463qhQL4UsGt4.tJZjZZVxUCq3Lv4FxDpA{color:var(--fg-minor)}.BZoPrBvrylM6w_O2GGXT.ttiCsKu463qhQL4UsGt4:not(.t5EsRx8JB6mfSpj28xeH){cursor:pointer;appearance:none;border:none;outline:none;text-decoration:none;background:none}","",{version:3,sources:["webpack://./packages/editor/src/nodes/code-block/component/editor/components/title/title.module.scss"],names:[],mappings:"AACE,2CACE,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,qBAAA,CAEA,gEACE,qBAAA,CAGF,sEACE,cAAA,CACA,eAAA,CACA,WAAA,CACA,YAAA,CACA,oBAAA,CACA,eAAA",sourcesContent:[".x {\n  &.title {\n    font-size: 14.6px;\n    line-height: 19.8px;\n    margin-left: 8px;\n    color: var(--fg-muted);\n\n    &.has-title {\n      color: var(--fg-minor);\n    }\n\n    &:not(.read-only) {\n      cursor: pointer;\n      appearance: none;\n      border: none;\n      outline: none;\n      text-decoration: none;\n      background: none;\n    }\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={x:"BZoPrBvrylM6w_O2GGXT",title:"ttiCsKu463qhQL4UsGt4","has-title":"tJZjZZVxUCq3Lv4FxDpA","read-only":"t5EsRx8JB6mfSpj28xeH"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);