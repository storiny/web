<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Connections â€” Storiny</title>
    <meta content="initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport">
    <meta content="noindex,nofollow" name="robots">
    <style>
        html,
        body {
            color-scheme: dark;
            background: hsl(214deg 8% 10%);
        }

        body {
            margin: 0;
            padding: 3rem 16px;
            border: none;
            outline: none;
            height: 100vh;
            overflow: hidden;
        }

        main {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 32px;
        }

        p {
            margin: 0;
            padding: 0;
            border: 0;
            color: #b3b3b3;
            vertical-align: baseline;
            font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto, arial, sans-serif;
            font-size: 14px;
            line-height: 19px;
        }

        p.error {
            color: #f83f5e;
        }

        .content {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 32px;
        }

        svg:not(.status) {
            width: 74px;
            height: 74px;
        }

        svg:not(.status) path {
            fill: #fcfcfc;
        }

        .account {
            font-weight: bold;
        }

        .sub {
            margin-top: 8px;
            font-size: 14px;
            line-height: 19px;
        }

        @media (max-width: 600px) {
            .content {
                gap: 24px;
            }

            svg:not(.status) {
                width: 58px;
                height: 58px;
            }
        }
    </style>
</head>
<body dir="ltr">
<main>
    <div aria-hidden="true" class="content">
        <svg viewBox="0 0 64 64"
        >
            <path
                    d="M41.98 9.64a11.5 11.5 0 1 0-7.05 16.88l8.06 13.96a11.5 11.5 0 1 0 5.27-3.05l-8.05-13.96a11.5 11.5 0 0 0 1.77-13.83ZM12.82 60.12a11.5 11.5 0 1 0 0-23 11.5 11.5 0 0 0 0 23Z"
            />
        </svg>
        <% if error.is_some() { %>
        <svg class="status" viewBox="0 0 12 12" width="24" height="24">
            <path d="M9 3 3 9m0-6 6 6" stroke="#f83f5e" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
        <% } else { %>
        <svg class="status" viewBox="0 0 12 12" width="24" height="24">
            <path d="M6 2.69v7m-3.5-3.5h7" stroke="#828282" stroke-width="1" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
        <% } %>
        <%- provider_icon %>
    </div>
    <div>
        <% if let Some(err) = error { %>
        <p class="error">
            Failed to add your <span class="account"><%= provider_name %></span> account to <span
                class="account">Storiny</span>
        </p>
        <p class="sub">
            <% match err {
            error::AddAccountError::StateMismatch => { %>
            The request was tampered during the authentication window.
            <% } error::AddAccountError::InsufficientScopes => { %>
            You (or the provider) did not grant the required scopes.
            <% } error::AddAccountError::DuplicateAccount => { %>
            You already have a <span class="account"><%= provider_name %></span> account connected to your <span
                class="account">Storiny</span>
            account.
            <% } error::AddAccountError::DuplicateVendorID => { %>
            This <span class="account"><%= provider_name %></span> account is already connected to some other <span
                class="account">Storiny</span>
            account.
            <% } error::AddAccountError::DuplicateVendorEmail => { %>
            The email associated with this <span class="account"><%= provider_name %></span> account is already used
            by some other <span class="account">Storiny</span> account.
            <% } _ => {}
            } %>
        </p>
        <% } else { %>
        <p>
            Added your <span class="account"><%= provider_name %></span> account to your <span
                class="account">Storiny</span> account.
        </p>
        <p class="sub">
            You can close this window.
        </p>
        <% } %>
    </div>
</main>
</body>
</html>