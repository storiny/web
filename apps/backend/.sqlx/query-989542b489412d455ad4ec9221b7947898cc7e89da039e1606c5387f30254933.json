{
  "db_name": "PostgreSQL",
  "query": "SELECT u.id,\n\t   u.name,\n\t   u.username,\n\t   u.bio,\n\t   u.rendered_bio                                                AS \"rendered_bio!\",\n\t   u.avatar_id,\n\t   u.avatar_hex,\n\t   u.banner_id,\n\t   u.banner_hex,\n\t   u.location,\n\t   u.public_flags,\n\t   u.is_private,\n\t   -- Stats\n\t   u.story_count,\n\t   u.follower_count,\n\t   u.is_plus_member,\n\t   -- Handle `following_list_visibility`\n\t   CASE\n\t\t   -- Everyone\n\t\t   WHEN (u.following_list_visibility = 1)\n\t\t\t   THEN u.following_count\n\t   END                                                           AS \"following_count\",\n\t   -- Handle `friend_list_visibility`\n\t   CASE\n\t\t   -- Everyone\n\t\t   WHEN (u.friend_list_visibility = 1)\n\t\t\t   THEN u.friend_count\n\t   END                                                           AS \"friend_count\",\n\t   -- Timestamps\n\t   u.created_at,\n\t   -- Connections\n\t   COALESCE(ARRAY_AGG(DISTINCT\n\t\t\t\t(\"u->connection\".provider, \"u->connection\".provider_identifier, \"u->connection\".display_name))\n\t\t\t\tFILTER (WHERE \"u->connection\".id IS NOT NULL), '{}') AS \"connections!: Vec<ProfileConnection>\",\n\t   -- Status\n\t   -- Use a discrete column to deserialize it into `OffsetDateTime`.\n\t   \"u->status\".expires_at                                        AS \"status_expires_at?\",\n\t   \"u->status\".duration                                          AS \"status_duration?\",\n\t   \"u->status\".emoji                                             AS \"status_emoji?\",\n\t   \"u->status\".text                                              AS \"status_text?\",\n\t   \"u->status\".visibility                                        AS \"status_visibility?\",\n\t   CASE\n\t\t   WHEN \"u->status\".user_id IS NOT NULL AND\n\t\t\t   -- Global\n\t\t\t\t\"u->status\".visibility = 1\n\t\t\t   THEN TRUE\n\t\t   ELSE FALSE\n\t   END                                                           AS \"has_status!\",\n\t   -- Boolean flags\n\t   FALSE                                                         AS \"is_following!\",\n\t   FALSE                                                         AS \"is_follower!\",\n\t   FALSE                                                         AS \"is_friend!\",\n\t   FALSE                                                         AS \"is_subscribed!\",\n\t   FALSE                                                         AS \"is_friend_request_sent!\",\n\t   FALSE                                                         AS \"is_blocked_by_user!\",\n\t   FALSE                                                         AS \"is_blocked!\",\n\t   FALSE                                                         AS \"is_muted!\"\nFROM\n\tusers u\n\t\t-- Join status\n\t\tLEFT OUTER JOIN user_statuses AS \"u->status\"\n\t\t\t\t\t\tON u.id = \"u->status\".user_id\n\t\t\t\t\t\t\tAND (\"u->status\".expires_at IS NULL\n\t\t\t\t\t\t\t\tOR \"u->status\".expires_at > NOW())\n\t\t-- Join connections\n\t\tLEFT OUTER JOIN connections AS \"u->connection\"\n\t\t\t\t\t\tON \"u->connection\".user_id = u.id\n\t\t\t\t\t\t\tAND \"u->connection\".hidden IS FALSE\nWHERE\n\t  u.username = $1\n  AND u.deactivated_at IS NULL\n  AND u.deleted_at IS NULL\nGROUP BY\n\tu.id,\n\t\"u->status\".expires_at,\n\t\"u->status\".duration,\n\t\"u->status\".emoji,\n\t\"u->status\".text,\n\t\"u->status\".visibility,\n\t\"u->status\".user_id\nLIMIT 1\n",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Int8"
      },
      {
        "ordinal": 1,
        "name": "name",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "username",
        "type_info": "Text"
      },
      {
        "ordinal": 3,
        "name": "bio",
        "type_info": "Text"
      },
      {
        "ordinal": 4,
        "name": "rendered_bio!",
        "type_info": "Text"
      },
      {
        "ordinal": 5,
        "name": "avatar_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 6,
        "name": "avatar_hex",
        "type_info": "Text"
      },
      {
        "ordinal": 7,
        "name": "banner_id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 8,
        "name": "banner_hex",
        "type_info": "Text"
      },
      {
        "ordinal": 9,
        "name": "location",
        "type_info": "Text"
      },
      {
        "ordinal": 10,
        "name": "public_flags",
        "type_info": "Int4"
      },
      {
        "ordinal": 11,
        "name": "is_private",
        "type_info": "Bool"
      },
      {
        "ordinal": 12,
        "name": "story_count",
        "type_info": "Int4"
      },
      {
        "ordinal": 13,
        "name": "follower_count",
        "type_info": "Int4"
      },
      {
        "ordinal": 14,
        "name": "is_plus_member",
        "type_info": "Bool"
      },
      {
        "ordinal": 15,
        "name": "following_count",
        "type_info": "Int4"
      },
      {
        "ordinal": 16,
        "name": "friend_count",
        "type_info": "Int4"
      },
      {
        "ordinal": 17,
        "name": "created_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 18,
        "name": "connections!: Vec<ProfileConnection>",
        "type_info": "RecordArray"
      },
      {
        "ordinal": 19,
        "name": "status_expires_at?",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 20,
        "name": "status_duration?",
        "type_info": "Int2"
      },
      {
        "ordinal": 21,
        "name": "status_emoji?",
        "type_info": "Text"
      },
      {
        "ordinal": 22,
        "name": "status_text?",
        "type_info": "Text"
      },
      {
        "ordinal": 23,
        "name": "status_visibility?",
        "type_info": "Int2"
      },
      {
        "ordinal": 24,
        "name": "has_status!",
        "type_info": "Bool"
      },
      {
        "ordinal": 25,
        "name": "is_following!",
        "type_info": "Bool"
      },
      {
        "ordinal": 26,
        "name": "is_follower!",
        "type_info": "Bool"
      },
      {
        "ordinal": 27,
        "name": "is_friend!",
        "type_info": "Bool"
      },
      {
        "ordinal": 28,
        "name": "is_subscribed!",
        "type_info": "Bool"
      },
      {
        "ordinal": 29,
        "name": "is_friend_request_sent!",
        "type_info": "Bool"
      },
      {
        "ordinal": 30,
        "name": "is_blocked_by_user!",
        "type_info": "Bool"
      },
      {
        "ordinal": 31,
        "name": "is_blocked!",
        "type_info": "Bool"
      },
      {
        "ordinal": 32,
        "name": "is_muted!",
        "type_info": "Bool"
      }
    ],
    "parameters": {
      "Left": [
        "Text"
      ]
    },
    "nullable": [
      false,
      false,
      false,
      false,
      true,
      true,
      true,
      true,
      true,
      false,
      false,
      false,
      false,
      false,
      false,
      null,
      null,
      false,
      null,
      true,
      false,
      true,
      true,
      false,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "989542b489412d455ad4ec9221b7947898cc7e89da039e1606c5387f30254933"
}
