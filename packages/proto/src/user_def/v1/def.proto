syntax = "proto3";

package user_def.v1;

enum StatusVisibility {
  STATUS_VISIBILITY_UNSPECIFIED /**/ = 0;
  STATUS_VISIBILITY_GLOBAL /*     */ = 1;
  STATUS_VISIBILITY_FOLLOWERS /*  */ = 2;
  STATUS_VISIBILITY_FRIENDS /*    */ = 3;
}

enum StatusDuration {
  STATUS_DURATION_UNSPECIFIED /**/ = 0;
  STATUS_DURATION_NEVER /*      */ = 1;
  STATUS_DURATION_MIN_30 /*     */ = 2;
  STATUS_DURATION_MIN_60 /*     */ = 3;
  STATUS_DURATION_HR_4 /*       */ = 4;
  STATUS_DURATION_DAY_1 /*      */ = 5;
}

message BareStatus {
  optional string emoji /*      */ = 1;
  optional string text /*       */ = 2;
  optional string expires_at /* */ = 3;
}

message ExtendedStatus {
  optional string emoji /*      */ = 1;
  optional string text /*       */ = 2;
  optional string expires_at /* */ = 3;
  StatusDuration duration /*    */ = 4;
  StatusVisibility visibility /**/ = 5;
}

// User

message BareUser {
  string id /*                 */ = 1;
  string name /*               */ = 2;
  string username /*           */ = 3;
  optional string avatar_id /* */ = 4;
  optional string avatar_hex /**/ = 5;
  uint32 public_flags /*       */ = 6;
}

message ExtendedUser {
  string id /*                 */ = 1;
  string name /*               */ = 2;
  string username /*           */ = 3;
  string rendered_bio /*       */ = 4;
  optional string avatar_id /* */ = 5;
  optional string avatar_hex /**/ = 6;
  uint32 public_flags /*       */ = 7;
  bool is_private /*           */ = 8;
  string location /*           */ = 9;
  string created_at /*         */ = 10;
  uint32 follower_count /*     */ = 11;
  BareStatus status /*         */ = 12;
  // User specific props
  bool is_self /*              */ = 13;
  bool is_following /*         */ = 14;
  bool is_follower /*          */ = 15;
  bool is_friend /*            */ = 16;
  bool is_blocked_by_user /*   */ = 17;
}

// Get user ID

message GetUserIdRequest {
  string token = 1; // Token from the session cookie
}

message GetUserIdResponse {
  string id = 1;
}

// Get user relations info

message GetUserRelationsInfoRequest {
  string id = 1;
}

message GetUserRelationsInfoResponse {
  uint32 follower_count /*              */ = 1;
  uint32 following_count /*             */ = 2;
  uint32 friend_count /*                */ = 3;
  uint32 pending_friend_request_count /**/ = 4;
}

// Get user blocks count

message GetUserBlockCountRequest {
  string id = 1;
}

message GetUserBlockCountResponse {
  uint32 block_count = 1;
}

// Get user mutes count

message GetUserMuteCountRequest {
  string id = 1;
}

message GetUserMuteCountResponse {
  uint32 mute_count = 1;
}
