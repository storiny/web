"use strict";(self.webpackChunk_storiny_monorepo=self.webpackChunk_storiny_monorepo||[]).push([[24683],{"./node_modules/@hookform/resolvers/zod/dist/zod.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>t});var index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs");const s=(e,s,o)=>{if(e&&"reportValidity"in e){const r=(0,index_esm.Jt)(o,s);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},resolvers_o=(t,e)=>{for(const o in e.fields){const r=e.fields[o];r&&r.ref&&"reportValidity"in r.ref?s(r.ref,o,t):r.refs&&r.refs.forEach((e=>s(e,o,t)))}},resolvers_r=(s,r)=>{r.shouldUseNativeValidation&&resolvers_o(s,r);const f={};for(const o in s){const n=(0,index_esm.Jt)(r.fields,o),a=Object.assign(s[o]||{},{ref:n&&n.ref});if(i(r.names||Object.keys(s),o)){const s=Object.assign({},(0,index_esm.Jt)(f,o));(0,index_esm.hZ)(s,"root",a),(0,index_esm.hZ)(f,o,s)}else(0,index_esm.hZ)(f,o,a)}return f},i=(t,e)=>t.some((t=>t.startsWith(e+".")));var n=function(r,e){for(var n={};r.length;){var t=r[0],s=t.code,i=t.message,a=t.path.join(".");if(!n[a])if("unionErrors"in t){var u=t.unionErrors[0].errors[0];n[a]={message:u.message,type:u.code}}else n[a]={message:i,type:s};if("unionErrors"in t&&t.unionErrors.forEach((function(e){return e.errors.forEach((function(e){return r.push(e)}))})),e){var c=n[a].types,f=c&&c[t.code];n[a]=(0,index_esm.Gb)(a,e,n,s,f?[].concat(f,t.message):t.message)}r.shift()}return n},t=function(o,t,s){return void 0===s&&(s={}),function(i,a,u){try{return Promise.resolve(function(e,n){try{var a=Promise.resolve(o["sync"===s.mode?"parse":"parseAsync"](i,t)).then((function(e){return u.shouldUseNativeValidation&&resolvers_o({},u),{errors:{},values:s.raw?i:e}}))}catch(r){return n(r)}return a&&a.then?a.then(void 0,n):a}(0,(function(r){if(function(r){return Array.isArray(null==r?void 0:r.errors)}(r))return{values:{},errors:resolvers_r(n(r.errors,!u.shouldUseNativeValidation&&"all"===u.criteriaMode),u)};throw r})))}catch(r){return Promise.reject(r)}}}},"./apps/web/src/app/(native)/(auth)/auth/(segmented)/@mfa/page.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>page_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),mock=__webpack_require__("./packages/ui/src/redux/mock/index.tsx"),layout=__webpack_require__("./apps/web/src/app/(native)/(auth)/layout.tsx"),link_link=__webpack_require__("./packages/ui/src/components/link/link.tsx"),spacer=__webpack_require__("./packages/ui/src/components/spacer/spacer.tsx"),typography=__webpack_require__("./packages/ui/src/components/typography/typography.tsx"),main_module=__webpack_require__("./packages/ui/src/theme/main.module.scss"),_auth_state=__webpack_require__("./apps/web/src/app/(native)/(auth)/state.tsx"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),utils=__webpack_require__("./apps/web/src/common/utils/index.ts");var button_button=__webpack_require__("./packages/ui/src/components/button/button.tsx"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),form_form=__webpack_require__("./packages/ui/src/components/form/form.tsx"),form_input=__webpack_require__("./packages/ui/src/components/form-input/form-input.tsx"),grow=__webpack_require__("./packages/ui/src/components/grow/grow.tsx"),use_toast=__webpack_require__("./packages/ui/src/components/toast/use-toast/use-toast.tsx"),login=__webpack_require__("./packages/ui/src/redux/features/api/endpoints/auth/login/index.ts"),handle_api_error=__webpack_require__("./packages/ui/src/utils/handle-api-error/handle-api-error.ts"),messages=__webpack_require__("./packages/shared/src/constants/messages/index.ts"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs");const MFA_SCHEMA=lib.z.object({code:lib.z.string().min(6,messages.r.min("authentication code",6))}),MFAForm=({on_submit})=>{const router=(0,utils.mC)(),{state,set_state}=(0,_auth_state.H)(),toast=(0,use_toast.w)(),form=(0,index_esm.mN)({resolver:(0,zod.u)(MFA_SCHEMA),defaultValues:{code:""}}),[mutate_login,{isLoading:is_loading}]=(0,login.K)(),[done,set_done]=react.useState(!1),handle_submit=react.useCallback((values=>{set_state({mfa_code:values.code});const login_data=state.login_data;var code;on_submit?on_submit(values):login_data?mutate_login({email:login_data.email,password:login_data.password,remember_me:login_data.remember_me,code:(code=values.code,code.replace(/[^a-zA-Z0-9]+/g,"")),blog_domain:state.blog_domain}).unwrap().then((res=>{if("success"===res.result){if(set_done(!0),state.blog_domain&&res.blog_token){const params=new URLSearchParams;params.set("token",res.blog_token),state.next_url&&params.set("next-url",state.next_url),router.replace(`https://${state.blog_domain}/verify-login?${params.toString()}`)}else router.replace((0,utils.b_)(state.next_url)||"/");router.refresh()}else{const next_segment="suspended"===res.result?"suspended":"held_for_deletion"===res.result?"deletion":"deactivated"===res.result?"deactivated":"email_confirmation";set_state({segment:next_segment})}})).catch((error=>{set_done(!1),(0,handle_api_error.n)(error,toast,form,"Could not log you in")})):toast("Missing credentials","error")}),[form,mutate_login,on_submit,router,set_state,state.login_data,state.next_url,state.blog_domain,toast]);return(0,jsx_runtime.jsxs)(form_form.A,{className:(0,clsx_m.$)(main_module.A["flex-col"],main_module.A["full-h"]),disabled:done||is_loading,on_submit:handle_submit,provider_props:form,children:[(0,jsx_runtime.jsx)(form_input.A,{autoComplete:"off",autoFocus:!0,"data-testid":"mfa-code-input",label:"Authentication code",maxLength:20,minLength:6,name:"code",placeholder:"6-digit authentication code",required:!0,size:"lg",type:"text"}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:5}),(0,jsx_runtime.jsx)(grow.A,{}),(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.$)(main_module.A["flex-col"],main_module.A["flex-center"]),children:(0,jsx_runtime.jsx)(button_button.A,{className:main_module.A["full-w"],disabled:done,loading:is_loading,size:"lg",type:"submit",children:"Continue"})})]})},_mfa_form=MFAForm;MFAForm.__docgenInfo={description:"",methods:[],displayName:"MFAForm",props:{on_submit:{required:!1,tsType:{name:"SubmitHandler",elements:[{name:"z.infer",elements:[{name:"MFA_SCHEMA"}],raw:"z.infer<typeof MFA_SCHEMA>"}],raw:"SubmitHandler<MFASchema>"},description:""}}};const Page=()=>{const{set_state}=(0,_auth_state.H)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(typography.A,{as:"h1",level:"h3",children:"Verify it's you"}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:.5}),(0,jsx_runtime.jsx)(typography.A,{color:"minor",level:"body2",children:"Enter your authentication code to continue. You can also use one of the backup codes for your Storiny account."}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:5}),(0,jsx_runtime.jsx)(_mfa_form,{}),(0,jsx_runtime.jsx)(spacer.A,{orientation:"vertical",size:2}),(0,jsx_runtime.jsx)("div",{className:main_module.A["flex-center"],children:(0,jsx_runtime.jsx)(link_link.A,{className:main_module.A["t-medium"],href:"#",level:"body2",onClick:event=>{event.preventDefault(),set_state({segment:"base"})},underline:"always",children:"Show other options to log in"})})]})},page=Page;Page.__docgenInfo={description:"",methods:[],displayName:"Page"};const page_stories={title:"pages/auth/@mfa",component:page,parameters:{layout:"fullscreen"},tags:["autodocs"]},Default={decorators:[Story=>(0,mock.s)((0,jsx_runtime.jsx)(layout.A,{children:(0,jsx_runtime.jsx)(Story,{})}),{ignore_primitive_providers:!0})]},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  decorators: [(Story): React.ReactElement => render_with_state(<AuthLayout>\n          <Story />\n        </AuthLayout>, {\n    ignore_primitive_providers: true\n  })]\n}",...Default.parameters?.docs?.source}}}},"./apps/web/src/app/(native)/(auth)/layout.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>layout});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),clsx_m=__webpack_require__("./node_modules/clsx/dist/clsx.m.js"),plus_pattern=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./packages/ui/src/brand/plus-pattern/plus-pattern.tsx")),main=__webpack_require__("./packages/ui/src/components/main/main.tsx"),navbar=__webpack_require__("./packages/ui/src/layout/navbar/navbar.tsx"),main_module=__webpack_require__("./packages/ui/src/theme/main.module.scss"),layout_module=__webpack_require__("./apps/web/src/app/(native)/(auth)/layout.module.scss"),state=__webpack_require__("./apps/web/src/app/(native)/(auth)/state.tsx");__webpack_require__("./node_modules/process/browser.js").env.NEXT_PUBLIC_WEB_URL;const AuthLayout=({children})=>(0,jsx_runtime.jsxs)("div",{className:(0,clsx_m.$)(main_module.A.grid,main_module.A["grid-container"],main_module.A.minimal),children:[(0,jsx_runtime.jsx)(navbar.A,{variant:"minimal"}),(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.$)(main_module.A["full-w"],main_module.A["full-h"]),role:"presentation",style:{minHeight:"100vh",position:"fixed",pointerEvents:"none"},children:(0,jsx_runtime.jsx)(plus_pattern.A,{})}),(0,jsx_runtime.jsx)(main.A,{className:(0,clsx_m.$)(layout_module.A.x,layout_module.A.main),children:(0,jsx_runtime.jsx)("div",{className:(0,clsx_m.$)(main_module.A["flex-col"],layout_module.A.container),children:(0,jsx_runtime.jsx)(state.A,{children})})})]}),layout=AuthLayout;AuthLayout.__docgenInfo={description:"",methods:[],displayName:"AuthLayout",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./apps/web/src/app/(native)/(auth)/state.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,H:()=>use_auth_state});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),deepmerge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/deepmerge/dist/cjs.js"),deepmerge__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(deepmerge__WEBPACK_IMPORTED_MODULE_1__),next_navigation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_common_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./apps/web/src/common/utils/index.ts");const AuthStateContext=react__WEBPACK_IMPORTED_MODULE_3__.createContext({state:{},set_state:()=>{}}),AuthState=({children})=>{const search_params=(0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams)(),segment=(()=>{if(search_params){const segment=search_params.get("segment")||"",token=search_params.get("token")||"";if(["reset-password","login","signup","recover"].includes(segment)){if("reset-password"===segment&&token)return"reset_base";if(["login","signup","recover"].includes(segment))return"login"===segment?"login":"recover"===segment?"recovery_base":"signup_base"}}return"base"})(),[state,set_state]=react__WEBPACK_IMPORTED_MODULE_3__.useState({segment,visited_segments:[segment],next_url:(()=>{if(!search_params)return null;const path=decodeURIComponent(search_params.get("to")||""),blog=decodeURIComponent(search_params.get("blog")||""),is_blog_custom_domain=blog.includes(".");return path.length&&"/"!==path?path.startsWith("/")?path:`/${path}`:blog.length?(0,_common_utils__WEBPACK_IMPORTED_MODULE_4__.b_)(is_blog_custom_domain?blog:`${blog}.storiny.com`):null})(),blog_domain:(()=>{if(!search_params)return null;const blog=decodeURIComponent(search_params.get("blog")||"");return blog.includes(".")?blog:null})(),reset_password:{token:null},login_data:null,mfa_code:null,recovery:{email:""},signup:{email:"",name:"",password:"",username:"",wpm:null},signup_errors:{}});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(AuthStateContext.Provider,{value:{state,set_state:payload=>{set_state((prev_state=>{const next_state="object"==typeof payload?payload:payload(prev_state);if(next_state.segment)if("base"===next_state.segment)next_state.visited_segments=["base"];else if(prev_state.segment!==next_state.segment)next_state.visited_segments=Array.from(new Set([...prev_state.visited_segments,next_state.segment]));else{const visited_segments=prev_state.visited_segments;visited_segments.length&&(next_state.visited_segments=visited_segments.filter((item=>item!==next_state.segment)))}return deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(prev_state,next_state,{arrayMerge:(_,source_array)=>source_array})}))}},children})},use_auth_state=()=>react__WEBPACK_IMPORTED_MODULE_3__.useContext(AuthStateContext),__WEBPACK_DEFAULT_EXPORT__=AuthState;AuthState.__docgenInfo={description:"",methods:[],displayName:"AuthState",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./packages/shared/src/enums/content-type/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>ContentType});var ContentType=function(ContentType){return ContentType.JSON="application/json; charset=UTF-8",ContentType}({})},"./packages/ui/src/components/form-input/form-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_input__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./packages/ui/src/components/input/input.tsx"),_form__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/ui/src/components/form/form-context.ts"),_form__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/ui/src/components/form/form-field/form-field.tsx"),_form__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/ui/src/components/form/form-item/form-item.tsx"),_form__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/ui/src/components/form/form-label/form-label.tsx"),_form__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/ui/src/components/form/form-control/form-control.tsx"),_form__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./packages/ui/src/components/form/form-helper-text/form-helper-text.tsx"),_form__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/ui/src/components/form/form-message/form-message.tsx");const FormInput=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(((props,ref)=>{const{name,disabled:disabled_prop,required,label,type="text",helper_text,form_slot_props,is_field_disabled=()=>!1,...rest}=props,form=(0,_form__WEBPACK_IMPORTED_MODULE_2__.xW)(),form_context=react__WEBPACK_IMPORTED_MODULE_1__.useContext(_form__WEBPACK_IMPORTED_MODULE_3__.c),disabled=Boolean(form_context.disabled||disabled_prop);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_4__.A,{control:form.control,name,render:({field,fieldState:{invalid,error}})=>{const is_disabled=is_field_disabled(field);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_form__WEBPACK_IMPORTED_MODULE_5__.A,{...null==form_slot_props?void 0:form_slot_props.form_item,disabled:disabled||is_disabled,ref,required,children:[label&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_6__.A,{...null==form_slot_props?void 0:form_slot_props.label,children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_7__.A,{...null==form_slot_props?void 0:form_slot_props.control,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_input__WEBPACK_IMPORTED_MODULE_8__.A,{...rest,color:invalid||error?"ruby":null==rest?void 0:rest.color,disabled:disabled||is_disabled,required,type,...field,onChange:event=>field.onChange("number"===type?Number.parseInt(event.target.value,10):event.target.value)})}),helper_text&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_9__.A,{...null==form_slot_props?void 0:form_slot_props.helper_text,children:helper_text}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_form__WEBPACK_IMPORTED_MODULE_10__.A,{...null==form_slot_props?void 0:form_slot_props.message})]})}})}));FormInput.displayName="FormInput";const __WEBPACK_DEFAULT_EXPORT__=FormInput;FormInput.__docgenInfo={description:"",methods:[],displayName:"FormInput",props:{form_slot_props:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  control?: React.ComponentPropsWithoutRef<"input">;\n  form_item?: FormItemProps;\n  helper_text?: FormHelperTextProps;\n  label?: FormLabelProps;\n  message?: FormMessageProps;\n}',signature:{properties:[{key:"control",value:{name:"ReactComponentPropsWithoutRef",raw:'React.ComponentPropsWithoutRef<"input">',elements:[{name:"literal",value:'"input"'}],required:!1}},{key:"form_item",value:{name:"FormItemProps",required:!1}},{key:"helper_text",value:{name:"FormHelperTextProps",required:!1}},{key:"label",value:{name:"FormLabelProps",required:!1}},{key:"message",value:{name:"FormMessageProps",required:!1}}]}},description:"The props passed to the individual form elements."},helper_text:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The helper text content placed below the control."},is_field_disabled:{required:!1,tsType:{name:"signature",type:"function",raw:"(\n  field: ControllerRenderProps<FieldValues, string>\n) => boolean",signature:{arguments:[{type:{name:"ControllerRenderProps",elements:[{name:"FieldValues"},{name:"string"}],raw:"ControllerRenderProps<FieldValues, string>"},name:"field"}],return:{name:"boolean"}}},description:"Predicate function for determining whether the input is disabled based on the field object.\n@param field"},label:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The label for the form component."},name:{required:!0,tsType:{name:"string"},description:"The name of the form element."}},composes:["InputProps"]}},"./packages/ui/src/components/toast/use-toast/use-toast.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>use_toast});var _redux_features_toast_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/redux/features/toast/slice.ts"),_redux_hooks__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/redux/hooks/index.ts");const use_toast=()=>{const dispatch=(0,_redux_hooks__WEBPACK_IMPORTED_MODULE_0__.f)();return(message,severity)=>{dispatch((0,_redux_features_toast_slice__WEBPACK_IMPORTED_MODULE_1__.nT)({message,severity}))}}},"./packages/ui/src/redux/features/api/endpoints/auth/login/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>use_login_mutation});var _storiny_shared__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/shared/src/enums/content-type/index.ts"),_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/ui/src/redux/features/api/slice.ts");const{useLoginMutation:use_login_mutation}=_redux_features_api_slice__WEBPACK_IMPORTED_MODULE_0__.Qo.injectEndpoints({endpoints:builder=>({login:builder.mutation({query:({bypass,...rest})=>({url:`/auth/login?bypass=${Boolean(bypass)}`,method:"POST",body:rest,headers:{"Content-type":_storiny_shared__WEBPACK_IMPORTED_MODULE_1__.c.JSON}})})})})},"./packages/ui/src/utils/handle-api-error/handle-api-error.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>handle_api_error});var _storiny_shared_src_utils_dev_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/shared/src/utils/dev-log/index.ts"),_utils_is_form_error__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/ui/src/utils/is-form-error/is-form-error.ts");const handle_api_error=(error,toaster,form,default_message)=>{var _error_data,_error_data1,_error_data2;(_storiny_shared_src_utils_dev_log__WEBPACK_IMPORTED_MODULE_0__.y.error(error),form&&(0,_utils_is_form_error__WEBPACK_IMPORTED_MODULE_1__.H)(error))?handle_form_error(null===(_error_data=error.data)||void 0===_error_data?void 0:_error_data.errors,form.setError):toaster((null==error||null===(_error_data1=error.data)||void 0===_error_data1?void 0:_error_data1.error)||"string"==typeof(null==error?void 0:error.data)&&error.data||("FETCH_ERROR"===(null==error?void 0:error.status)?"Storiny is currently unavailable. Check your network connection or try again later.":default_message),(null==error||null===(_error_data2=error.data)||void 0===_error_data2?void 0:_error_data2.error)||"FETCH_ERROR"!==(null==error?void 0:error.status)?"error":"warning")},handle_form_error=(errors,set_error)=>errors.forEach((([field,message])=>{set_error(field,{type:"server",message})}))},"./packages/ui/src/utils/is-form-error/is-form-error.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>is_form_error});const is_form_error=error=>{var _error_data;return"form"===(null==error||null===(_error_data=error.data)||void 0===_error_data?void 0:_error_data.type)}},"./node_modules/deepmerge/dist/cjs.js":module=>{var isMergeableObject=function isMergeableObject(value){return function isNonNullObject(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue||function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}(value)}(value)};var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepmerge(function emptyTarget(val){return Array.isArray(val)?[]:{}}(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return Object.propertyIsEnumerable.call(target,symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepmerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}function deepmerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}deepmerge.all=function deepmergeAll(array,options){if(!Array.isArray(array))throw new Error("first argument should be an array");return array.reduce((function(prev,next){return deepmerge(prev,next,options)}),{})};var deepmerge_1=deepmerge;module.exports=deepmerge_1}}]);